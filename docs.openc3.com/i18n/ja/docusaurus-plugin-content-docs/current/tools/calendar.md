---
title: カレンダー (Enterprise)
description: メタデータ、ノート、タイムラインの視覚化
sidebar_custom_props:
  myEmoji: 🛠️
---

## はじめに

カレンダーは、メタデータ、ノート、タイムライン情報を一つの理解しやすい場所に視覚化します。タイムラインを使用すると、未来の日時に基づいてコマンドやスクリプトを簡単に実行することができます。

![カレンダー](/img/calendar/blank_calendar.png)

### タイムラインの追加

COSMOSにタイムラインを追加するのは、作成 (Create) -> タイムライン (Timeline) をクリックして一意の名前を付けるだけで簡単です。タイムラインは組織化の目的や重複するアクティビティ用に作成できます。特定のタイムライン上ではアクティビティを重複させることはできません。ただし、追加の各タイムラインはいくつかのスレッドで構成されているため、必要に応じてのみタイムラインを作成してください。

## イベントの種類

### メタデータ

メタデータを使用すると、任意のデータをCOSMOSシステムに記録できます。例えば、オペレーター、環境要因、手順のステップなど、利用可能なターゲットテレメトリに含まれない入力をユーザーに求めることができます。これにより、これらのフィールドに基づいてメタデータを検索し、関連するテレメトリデータを相関させることができます。

作成メニュー (Create) から、またはカレンダー上でメタデータ項目を表示したい特定の時間枠を右クリックすることで、新しいメタデータ項目を作成できます。メタデータエントリには開始時間のみがあり、終了時間はないことに注意してください。

![メタデータ作成1](/img/calendar/create_metadata1.png)

次に、作成したいすべてのメタデータ項目のキー/値ペアを追加します。

![メタデータ作成2](/img/calendar/create_metadata2.png)

### ノート

ノートには開始時間と終了時間の両方が必要です。

![ノート作成1](/img/calendar/create_note1.png)

次に、カレンダーにノートイベントを作成するためにノートを記録します。

![ノート作成2](/img/calendar/create_note2.png)

### アクティビティ

タイムラインにスケジュールされるアクティビティは、開始時間と終了時間の両方を必要とします。

![アクティビティ作成1](/img/calendar/create_activity1.png)

アクティビティは、単一のコマンドを実行したり、スクリプトを実行したり、または単に参照やその他の記録管理のためにカレンダー上の空間を「予約」したりすることができます。

![アクティビティ作成2](/img/calendar/create_activity2.png)

カレンダーアクティビティがスケジュールされると、プラス（+）を含む緑色の円で表示されます。正常に完了すると、アイコンはチェックマーク（✓）を含む緑色の円に変わります。予約アクティビティは単に空の緑色の円を持ちます。

![カレンダー](/img/calendar/calendar.png)

カレンダーイベントはファイル (File)->テーブルの表示(Show Table Display)を通じてリスト形式でも表示でき、過去および未来のイベントの両方をリストするためのページネーションをサポートしています。

![リストビュー](/img/calendar/list_view.png)

## タイムラインの実装詳細

ユーザーがタイムラインを作成すると、新しいタイムラインマイクロサービスが起動します。タイムラインマイクロサービスはタイムラインの主要な実行スレッドです。これによりスケジューラマネージャースレッドが開始されます。スケジューラマネージャースレッドには、アクティビティを実行するための複数のスレッドを持つスレッドプールが含まれています。スケジューラマネージャーはスケジュールを評価し、アクティビティの開始時間に基づいてアクティビティをキューに追加します。

メインスレッドはWebソケットでブロックし、タイムラインへの変更要求をリッスンします。これにはアクティビティの追加、削除、更新などが含まれます。これらの変更が現在の時刻から1時間以内であれば、メインスレッドはメモリ内のスケジュールに変更を加えます。Webソケットが更新を受け取ると、アクションルックアップテーブルが使用されます。これらのアクションは「作成」、「更新」、「削除」などです。一部のアクションでは、スケジュールとデータベースが常に同期されるようにするために、データベースからスケジュールを更新する必要があります。

スケジュールスレッドは1秒ごとにタスクを実行できるかどうかを確認します。開始時間が過去15秒以内であれば、スケジュール内の以前にキューに入れられたジョブリストをチェックします。アクティビティがキューに入れられておらず、実行されていない場合、アクティビティはキューに追加されます。これによりアクティビティにイベントが追加されますが、データベースには保存されません。

ワーカーはアクティビティがキューに配置されるまでキューでブロックします。ジョブがキューから取り出されると、タイプを確認してアクティビティを実行します。スレッドはアクティビティの実行を完了としてマークし、データベースレコードを更新して完了します。ワーカーがタスクの実行中にエラーが発生した場合、アクティビティは実行されず、エラーがデータベースに記録されます。

![タイムラインのライフサイクル](/img/calendar/timeline_lifecycle.png)