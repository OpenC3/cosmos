---
title: リトルエンディアンのビットフィールド
description: リトルエンディアンのビットフィールドを定義する
sidebar_custom_props:
  myEmoji: 💻
---

リトルエンディアンのビットフィールドを定義することは少し変わっていますが、COSMOSでは可能です。ただし、APPENDはリトルエンディアンのビットフィールドでは機能しないことに注意してください。

以下は、COSMOSがLITTLE_ENDIANデータを扱う際のルールです：

1. COSMOSのビットオフセットは常にBIG_ENDIANの用語で定義されます。ビット0は常にパケットの最初のバイトの最上位ビットであり、そこから増加していきます。

1. すべての8ビット、16ビット、32ビット、64ビットのバイト境界が合ったLITTLE_ENDIANデータ型は、パケット内のアイテムの一部を含む最初のバイトの最上位ビットとしてbit_offsetを定義します（これはBIG_ENDIANと全く同じです）。8ビットのLITTLE_ENDIANアイテムを除くすべてのアイテムでは、これはアイテムの最下位バイトになることに注意してください。

1. LITTLE_ENDIANビットフィールドは、8ビット、16ビット、32ビット、または64ビットではなく、バイト境界が合っていないLITTLE_ENDIAN INTまたはUINTアイテムとして定義されます。

1. LITTLE_ENDIANビットフィールドは、上記のルール1で説明されているように、BIG_ENDIANスペースでのビットフィールドの最上位ビットの位置としてbit_offsetを定義する必要があります。例えば、パケットの先頭にある次のC構造体は次のように定義されます：

```c
struct {
  unsigned short a:4;
  unsigned short b:8;
  unsigned short c:4;
}

ITEM A 4 4 UINT "struct item a"
ITEM B 12 8 UINT "struct item b"
ITEM C 8 4 UINT "struct item c"
```

これは視覚化するのが難しいですが、上記の構造はバイトスワップ後、バイト配列内で次のように展開されます：bの最下位4ビット、aの4ビット、cの4ビット、bの最上位4ビット。

最良のアドバイスは、実験を行い、コマンドとテレメトリサービスのView Raw機能を使用してパケットのバイトを検査し、必要に応じて調整することです。