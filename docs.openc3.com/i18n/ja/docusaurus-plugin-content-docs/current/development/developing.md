---
title: COSMOSã®é–‹ç™º
description: COSMOSã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–‹ç™º
sidebar_custom_props:
  myEmoji: ğŸ’»
---

# COSMOSã®é–‹ç™º

COSMOSã®é–‹ç™ºã«è²¢çŒ®ã—ãŸã„ã§ã™ã‹ï¼Ÿç§ãŸã¡ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹COSMOSã‚³ãƒ¼ãƒ‰ã¯ã™ã¹ã¦[Github](https://github.com/)ã«ã‚ã‚Šã¾ã™ã€‚ã¾ãšæœ€åˆã«[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ](https://github.com/join)ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚æ¬¡ã«[COSMOS](https://github.com/openc3/cosmos)ãƒªãƒã‚¸ãƒˆãƒªã‚’[ã‚¯ãƒ­ãƒ¼ãƒ³](https://docs.github.com/ja/repositories/creating-and-managing-repositories/cloning-a-repository)ã—ã¾ã™ã€‚ç§ãŸã¡ã¯ä»–ã®æ–¹ã‹ã‚‰ã®è²¢çŒ®ã‚’[ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](https://docs.github.com/ja/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests)ã¨ã—ã¦å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚

## é–‹ç™ºãƒ„ãƒ¼ãƒ«

COSMOSã®ã‚³ã‚¢ãƒãƒ¼ãƒ ã¯[Visual Studio Code](https://code.visualstudio.com/)ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦é–‹ç™ºã—ã¦ãŠã‚Šã€å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚ã¾ãŸã€dockerã€kubernetesã€gitlensã€prettierã€eslintã€pythonã€veturã€rubyãªã©å¤šãã®æ‹¡å¼µæ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ§‹æˆã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ã€VSCodeç”¨ã®`openc3.code-workspace`è¨­å®šã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€COSMOSã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®è¦ä»¶ã§ã‚ã‚‹[Docker Desktop](https://www.docker.com/products/docker-desktop)ã‚‚å¿…è¦ã§ã™ã€‚ã•ã‚‰ã«ã€[NodeJS](https://nodejs.org/ja/download/)ã¨[yarn](https://yarnpkg.com/getting-started/install)ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# COSMOSã®ãƒ“ãƒ«ãƒ‰

æ³¨æ„ï¼šç§ãŸã¡ã¯ä¸»ã«MacOSã§COSMOSã‚’é–‹ç™ºã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã“ã§ç´¹ä»‹ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‚ç…§ã—ã¦ã„ã¾ã™ãŒã€Windowsã§ã‚‚åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒãƒƒãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦å­˜åœ¨ã—ã¾ã™ã€‚

`openc3.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦COSMOSã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ï¼š

```bash
% ./openc3.sh build
```

ã“ã‚Œã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®COSMOSã‚³ãƒ³ãƒ†ãƒŠã®ä¾å­˜é–¢ä¿‚ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ³ãƒ†ãƒŠãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã€‚æ³¨æ„ï¼šç‰¹ã«åˆå›ã®ãƒ“ãƒ«ãƒ‰ã§ã¯ã€ã“ã‚Œã«ã¯é•·æ™‚é–“ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼

ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç¢ºèªã§ãã¾ã™ï¼š

```bash
% docker image ls | grep "openc3"
openc3inc/openc3-cosmos-init                latest   4cac7a3ea9d3   29 hours ago   446MB
openc3inc/openc3-cosmos-script-runner-api   latest   4aacbaf49f7a   29 hours ago   431MB
openc3inc/openc3-cosmos-cmd-tlm-api         latest   9a8806bd4be3   3 days ago     432MB
openc3inc/openc3-operator                   latest   223e98129fe9   3 days ago     405MB
openc3inc/openc3-base                       latest   98df5c0378c2   3 days ago     405MB
openc3inc/openc3-redis                      latest   5a3003a49199   8 days ago     111MB
openc3inc/openc3-traefik                    latest   ec13a8d16a2f   8 days ago     104MB
openc3inc/openc3-minio                      latest   787f6e3fc0be   8 days ago     238MB
openc3inc/openc3-node                       latest   b3ee86d3620a   8 days ago     372MB
openc3inc/openc3-ruby                       latest   aa158bbb9539   8 days ago     326MB
```

:::info ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã®ãƒ“ãƒ«ãƒ‰

ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹å ´åˆã‚„ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªRubygemsã€NPMã€APKã‚µãƒ¼ãƒãƒ¼ï¼ˆä¾‹ï¼šNexusï¼‰ã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯ã€[.env](https://github.com/openc3/cosmos/blob/main/.env)ãƒ•ã‚¡ã‚¤ãƒ«ã§æ¬¡ã®ç’°å¢ƒå¤‰æ•°ã‚’æ›´æ–°ã§ãã¾ã™ï¼šRUBYGEMS_URLã€NPM_URLã€APK_URLãªã©ã€‚ä¾‹ï¼š

    ALPINE_VERSION=3.19<br/>
    ALPINE_BUILD=7<br/>
    RUBYGEMS_URL=https://rubygems.org<br/>
    NPM_URL=https://registry.npmjs.org<br/>
    APK_URL=http://dl-cdn.alpinelinux.org<br/>

:::

# COSMOSã®å®Ÿè¡Œ

é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§COSMOSã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å†…éƒ¨APIãƒãƒ¼ãƒˆã¸ã®localhostã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ã«ãªã‚Šã€cmd-tlm-apiã¨script-runner-api Railsã‚µãƒ¼ãƒãƒ¼ã§`RAILS_ENV=development`ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã«ã¯ï¼š

```bash
% ./openc3.sh run
```

ã“ã‚Œã§å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèªã§ãã¾ã™ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«CONTAINER IDã€CREATEDã€STATUSã¯å‰Šé™¤ã—ã¦ã„ã¾ã™ï¼‰ï¼š

```bash
% docker ps
IMAGE                                             COMMAND                  PORTS                      NAMES
openc3/openc3-cmd-tlm-api:latest         "/sbin/tini -- railsâ€¦"   127.0.0.1:2901->2901/tcp   cosmos-openc3-cmd-tlm-api-1
openc3/openc3-script-runner-api:latest   "/sbin/tini -- railsâ€¦"   127.0.0.1:2902->2902/tcp   cosmos-openc3-script-runner-api-1
openc3/openc3-traefik:latest             "/entrypoint.sh traeâ€¦"   0.0.0.0:2900->80/tcp       cosmos-openc3-traefik-1
openc3/openc3-operator:latest            "/sbin/tini -- ruby â€¦"                              cosmos-openc3-operator-1
openc3/openc3-minio:latest               "/usr/bin/docker-entâ€¦"   127.0.0.1:9000->9000/tcp   cosmos-openc3-minio-1
openc3/openc3-redis:latest               "docker-entrypoint.sâ€¦"   127.0.0.1:6379->6379/tcp   cosmos-openc3-redis-1
```

localhost:2900ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€COSMOSãŒèµ·å‹•ã—ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã¾ã™ï¼

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ

COSMOSãŒèµ·å‹•ã—ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã§ã€å€‹ã€…ã®COSMOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

1. yarnã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ã—ã¾ã™

```bash
openc3-init/plugins % yarn
openc3-init/plugins % yarn build:common
```

2. ãƒ­ãƒ¼ã‚«ãƒ«ã®COSMOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆCmdTlmServerã€ScriptRunnerãªã©ï¼‰ã‚’æä¾›ã—ã¾ã™

```bash
openc3-init % cd plugins/packages/openc3-tool-scriptrunner
openc3-tool-scriptrunner % yarn serve
built in 128722ms
```

3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®[single SPA](https://single-spa.js.org/)ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã‚’è¨­å®šã—ã¾ã™

    localhost:2900ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€Œæ¤œè¨¼ã€ã‚’é¸æŠã—ã¾ã™<br/>
    ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä»¥ä¸‹ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ï¼š

```javascript
localStorage.setItem("devtools", true);
```

    æ›´æ–°ã™ã‚‹ã¨ã€å³ä¸‹ã«`{...}`ãŒè¡¨ç¤ºã•ã‚Œã¾ã™<br/>
    ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³(@openc3/tool-scriptrunner)ã®æ¨ªã«ã‚ã‚‹Defaultãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™<br/>
    é–‹ç™ºãƒ‘ã‚¹ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚ã“ã‚Œã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®yarn serveãŒè¿”ã™ãƒãƒ¼ãƒˆã¨ãƒ„ãƒ¼ãƒ«åï¼ˆscriptrunnerï¼‰ã«ä¾å­˜ã—ã¾ã™

        http://localhost:2914/tools/scriptrunner/main.js

4. ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã“ã®ä¾‹ã§ã¯Script Runnerï¼‰ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ”ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ï¼ˆ`console.log`ãªã©ï¼‰ã‚’å‹•çš„ã«è¿½åŠ ã™ã‚‹ã¨ã€yarnã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒæ›´æ–°ã•ã‚Œã¦æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚’è¨ˆç”»ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®[é–‹ç™ºãƒ„ãƒ¼ãƒ«](https://developer.chrome.com/docs/devtools/overview/)ã«æ…£ã‚Œã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡Œ

é–‹ç™ºã—ãŸã„ã‚³ãƒ¼ãƒ‰ãŒcmd-tlm-apiã¾ãŸã¯script-runner-apiãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®å ´åˆã€é–‹ç™ºã‚³ãƒ”ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®æ‰‹é †ãŒã‚ã‚Šã¾ã™ã€‚

1. traefikã®é–‹ç™ºãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚COSMOSã¯traefikã‚’ä½¿ç”¨ã—ã¦APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é©åˆ‡ãªå ´æ‰€ã«è»¢é€ã—ã¾ã™ã€‚

```bash
% cd openc3-traefik
openc3-traefik % docker ps
# traefikã‚’å«ã‚€åå‰ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’æ¢ã—ã¾ã™
openc3-traefik % docker stop cosmos-openc3-traefik-1
openc3-traefik % docker build --build-arg TRAEFIK_CONFIG=traefik-dev.yaml -t openc3-traefik-dev .
openc3-traefik % docker run --network=openc3-cosmos-network -p 2900:2900 -it --rm openc3-traefik-dev
```

2. cmd-tlm-apiã¾ãŸã¯script-runner-apiã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ”ãƒ¼ã‚’å®Ÿè¡Œã—ã¾ã™

```bash
% cd openc3-cosmos-cmd-tlm-api
openc3-cosmos-cmd-tlm-api % docker ps
# cmd-tlm-apiã‚’å«ã‚€åå‰ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’æ¢ã—ã¾ã™
openc3-cosmos-cmd-tlm-api % docker stop cosmos-openc3-cosmos-cmd-tlm-api-1
# Windowsã§ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
openc3-cosmos-cmd-tlm-api> dev_server.bat
# Linuxã§ã¯ã€.envãƒ•ã‚¡ã‚¤ãƒ«ã®ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã€REDISã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã™
openc3-cosmos-cmd-tlm-api % set -a; source ../.env; set +a
openc3-cosmos-cmd-tlm-api % export OPENC3_REDIS_HOSTNAME=127.0.0.1
openc3-cosmos-cmd-tlm-api % export OPENC3_REDIS_EPHEMERAL_HOSTNAME=127.0.0.1
openc3-cosmos-cmd-tlm-api % bundle install
openc3-cosmos-cmd-tlm-api % bundle exec rails s
```

3. `bundle exec rails s`ã‚³ãƒãƒ³ãƒ‰ãŒè¿”ã‚‹ã¨ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®æ“ä½œã«ã‚ˆã‚‹APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚cmd-tlm-apiã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ï¼ˆRubyãƒ‡ãƒãƒƒã‚°ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆãªã©ï¼‰ã‚’è¿½åŠ ã—ãŸå ´åˆã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ï¼ˆCTRL-Cï¼‰ã—ã¦å†èµ·å‹•ã—ã€ãã®åŠ¹æœã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
