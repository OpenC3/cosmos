# Copyright 2026 OpenC3, Inc.
# All Rights Reserved.
#
# Docker Compose for QuestDB integration testing.
# Usage: docker compose -f docker-compose.test.yml up -d
#        Run tests (see README)
#        docker compose -f docker-compose.test.yml down

services:
  questdb:
    image: questdb/questdb:9.3.2
    ports:
      - "127.0.0.1:9000:9000" # HTTP ILP ingest + Console
      - "127.0.0.1:8812:8812" # PostgreSQL wire protocol
      - "127.0.0.1:9003:9003" # Monitoring and alerting (min server)
    environment:
      QDB_PG_USER: admin
      QDB_PG_PASSWORD: admin
      QDB_HTTP_USER: admin
      QDB_HTTP_PASSWORD: admin
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/"]
      interval: 5s
      timeout: 5s
      retries: 5
