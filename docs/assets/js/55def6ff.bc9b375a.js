"use strict";(self.webpackChunknewdocs_openc_3_com=self.webpackChunknewdocs_openc_3_com||[]).push([[902],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>g});var n=i(7294);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}var a=n.createContext({}),c=function(e){var t=n.useContext(a),i=t;return e&&(i="function"==typeof e?e(t):r(r({},t),e)),i},d=function(e){var t=c(e.components);return n.createElement(a.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var i=e.components,o=e.mdxType,s=e.originalType,a=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(i),m=o,g=p["".concat(a,".").concat(m)]||p[m]||u[m]||s;return i?n.createElement(g,r(r({ref:t},d),{},{components:i})):n.createElement(g,r({ref:t},d))}));function g(e,t){var i=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=i.length,r=new Array(s);r[0]=m;var l={};for(var a in t)hasOwnProperty.call(t,a)&&(l[a]=t[a]);l.originalType=e,l[p]="string"==typeof e?e:o,r[1]=l;for(var c=2;c<s;c++)r[c]=i[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,i)}m.displayName="MDXCreateElement"},8027:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var n=i(7462),o=(i(7294),i(3905));const s={title:"Custom Widgets"},r=void 0,l={unversionedId:"guides/custom-widgets",id:"guides/custom-widgets",title:"Custom Widgets",description:"COSMOS allows you to build custom widgets which can be deployed with your plugin and used in Telemetry Viewer. Building custom widgets can utilitize any javascript frameworks but since COSMOS is written with Vue.js, we will use that framework in this tutorial.",source:"@site/docs/guides/custom-widgets.md",sourceDirName:"guides",slug:"/guides/custom-widgets",permalink:"/docs/guides/custom-widgets",draft:!1,editUrl:"https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/guides/custom-widgets.md",tags:[],version:"current",frontMatter:{title:"Custom Widgets"},sidebar:"defaultSidebar",previous:{title:"COSMOS and NASA cFS",permalink:"/docs/guides/cfs"},next:{title:"Little Endian Bitfields",permalink:"/docs/guides/little-endian-bitfields"}},a={},c=[{value:"Custom Widgets",id:"custom-widgets",level:2},{value:"Helloworld Widget",id:"helloworld-widget",level:3}],d={toc:c},p="wrapper";function u(e){let{components:t,...s}=e;return(0,o.kt)(p,(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"COSMOS allows you to build custom widgets which can be deployed with your ",(0,o.kt)("a",{parentName:"p",href:"/docs/configuration/plugins"},"plugin")," and used in ",(0,o.kt)("a",{parentName:"p",href:"/docs/tools/tlm-viewer"},"Telemetry Viewer"),". Building custom widgets can utilitize any javascript frameworks but since COSMOS is written with Vue.js, we will use that framework in this tutorial."),(0,o.kt)("h2",{id:"custom-widgets"},"Custom Widgets"),(0,o.kt)("p",null,"We're basically going to follow the COSMOS ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/tree/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo"},"Demo")," and explain how that custom widget was created."),(0,o.kt)("p",null,"If you look at the bottom of the Demo's ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/blob/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo/plugin.txt"},"plugin.txt")," file you'll see we declare the widgets:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ruby"},"WIDGET BIG\nWIDGET HELLOWORLD\n")),(0,o.kt)("p",null,"When the plugin is deployed this causes COSMOS to look for the as-built widgets. For the BIG widget it will look for the widget at ",(0,o.kt)("inlineCode",{parentName:"p"},"tools/widgets/BigWidget/BigWidget.umd.min.js"),". Similarly it looks for HELLOWORLD at ",(0,o.kt)("inlineCode",{parentName:"p"},"tools/widgets/HelloworldWidget/HelloworldWidget.umd.min.js"),". These directories and file names may seem mysterious but it's all about how the widgets get built."),(0,o.kt)("h3",{id:"helloworld-widget"},"Helloworld Widget"),(0,o.kt)("p",null,"The Helloworld Widget source code is found in the plugin's src directory and is called ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/blob/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo/src/HelloworldWidget.vue"},"HelloworldWidget.vue"),". The basic structure is as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  \x3c!-- Implement widget here --\x3e\n</template>\n\n<script>\nimport Widget from "@openc3/tool-common/src/components/widgets/Widget";\nexport default {\n  mixins: [Widget],\n  data() {\n    return {\n      // Reactive data items\n    };\n  },\n};\n<\/script>\n<style scoped>\n/* widget specific style */\n</style>\n')),(0,o.kt)("admonition",{title:"Vue & Vuetify",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For more information about how the COSMOS frontend is built (including all the Widgets) please check out ",(0,o.kt)("a",{parentName:"p",href:"https://vuejs.org"},"Vue.js")," and ",(0,o.kt)("a",{parentName:"p",href:"https://vuetifyjs.com"},"Vuetify"),".")),(0,o.kt)("p",null,"To build this custom widget we changed the Demo ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/blob/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo/Rakefile"},"Rakefile")," to call ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn run build")," when the plugin is built. ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn run XXX")," looks for 'scripts' to run in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/blob/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo/package.json"},"package.json")," file. If we open package.json we find the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "build": "vue-cli-service build --target lib --dest tools/widgets/HelloworldWidget --formats umd-min src/HelloworldWidget.vue --name HelloworldWidget && vue-cli-service build --target lib --dest tools/widgets/BigWidget --formats umd-min src/BigWidget.vue --name BigWidget"\n  },\n')),(0,o.kt)("p",null,"This uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"vue-cli-service")," to build the code found at ",(0,o.kt)("inlineCode",{parentName:"p"},"src/HelloworldWidget.vue")," and formats as ",(0,o.kt)("inlineCode",{parentName:"p"},"umd-min")," and puts it in the ",(0,o.kt)("inlineCode",{parentName:"p"},"tools/widgets/HelloworldWidget")," directory. So this is why the plugin looks for the plugin at ",(0,o.kt)("inlineCode",{parentName:"p"},"tools/widgets/HelloworldWidget/HelloworldWidget.umd.min.js"),". Click ",(0,o.kt)("a",{parentName:"p",href:"https://cli.vuejs.org/guide/cli-service.html#vue-cli-service-build"},"here")," for the ",(0,o.kt)("inlineCode",{parentName:"p"},"vue-cli-service build")," documentation."),(0,o.kt)("p",null,"If you look at the Demo plugin's ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenC3/cosmos/blob/main/openc3-cosmos-init/plugins/packages/openc3-cosmos-demo/targets/INST/screens/simple.txt"},"simple.txt")," screen you'll see we're using the widgets:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ruby"},"SCREEN AUTO AUTO 0.5\nLABELVALUE <%= target_name %> HEALTH_STATUS CCSDSSEQCNT\nHELLOWORLD\nBIG <%= target_name %> HEALTH_STATUS TEMP1\n")),(0,o.kt)("p",null,"Opening this screen in Telemetry Viewer results in the following:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Simple Screen",src:i(5727).Z,width:"734",height:"212"})),(0,o.kt)("p",null,"While this is a simple example the possibilities with custom widgets are limitless!"))}u.isMDXComponent=!0},5727:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/simple_screen-72b3ef47a781d13a30609b5c61e3b202.png"}}]);