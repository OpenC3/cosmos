"use strict";(self.webpackChunkdocs_openc3_com=self.webpackChunkdocs_openc3_com||[]).push([["1885"],{4843:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>r,contentTitle:()=>l,toc:()=>d,assets:()=>c});var s=JSON.parse('{"id":"getting-started/upgrading","title":"Upgrading","description":"How to upgrade and migrate COSMOS","source":"@site/docs/getting-started/upgrading.md","sourceDirName":"getting-started","slug":"/getting-started/upgrading","permalink":"/docs/getting-started/upgrading","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/getting-started/upgrading.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Upgrading","description":"How to upgrade and migrate COSMOS","sidebar_custom_props":{"myEmoji":"\u2B06\uFE0F"}},"sidebar":"defaultSidebar","previous":{"title":"Security","permalink":"/docs/getting-started/security"},"next":{"title":"Command Line Interface","permalink":"/docs/getting-started/cli"}}'),i=t(2615),o=t(9496);let r={sidebar_position:4,title:"Upgrading",description:"How to upgrade and migrate COSMOS",sidebar_custom_props:{myEmoji:"\u2B06\uFE0F"}},l,c={},d=[{value:"COSMOS Upgrades",id:"cosmos-upgrades",level:2},{value:"Upgrade Migration Process",id:"upgrade-migration-process",level:3},{value:"Upgrading from COSMOS Core to COSMOS Enterprise",id:"upgrading-from-cosmos-core-to-cosmos-enterprise",level:2},{value:"Migrating From COSMOS 6 to COSMOS 7",id:"migrating-from-cosmos-6-to-cosmos-7",level:2},{value:"Passwords",id:"passwords",level:3},{value:"MINIO to Versitygw Migration",id:"minio-to-versitygw-migration",level:3},{value:"Migration Script Commands",id:"migration-script-commands",level:4},{value:"Recommended Migration Workflow",id:"recommended-migration-workflow",level:4},{value:"Custom Credentials",id:"custom-credentials",level:4},{value:"COSMOS Configuration Changes",id:"cosmos-configuration-changes",level:3},{value:"Removed",id:"removed",level:4},{value:"Deprecated Keywords (Silently Ignored)",id:"deprecated-keywords-silently-ignored",level:4},{value:"New Keywords",id:"new-keywords",level:4},{value:"Migrating From COSMOS 5 to COSMOS 6",id:"migrating-from-cosmos-5-to-cosmos-6",level:2},{value:"Updating Vue",id:"updating-vue",level:3},{value:"The quick and dirty way",id:"the-quick-and-dirty-way",level:4},{value:"Step 1: Vue compat mode",id:"step-1-vue-compat-mode",level:4},{value:"(1.a) Update dependencies",id:"1a-update-dependencies",level:5},{value:"(1.b) Update the Vue config file (<code>vue.config.js</code>)",id:"1b-update-the-vue-config-file-vueconfigjs",level:5},{value:"(1.c) Update the eslint config file (<code>.eslintrc</code>)",id:"1c-update-the-eslint-config-file-eslintrc",level:5},{value:"(1.d) Fix build and runtime warnings and errors",id:"1d-fix-build-and-runtime-warnings-and-errors",level:5},{value:"Step 2: Bump compat mode from 2 to 3",id:"step-2-bump-compat-mode-from-2-to-3",level:4},{value:"Step 3: Update Vuetify",id:"step-3-update-vuetify",level:4},{value:"Step 4: Clean up",id:"step-4-clean-up",level:4},{value:"Migrating to the new OpenC3 common packages",id:"migrating-to-the-new-openc3-common-packages",level:3},{value:"Step 1: Update dependencies",id:"step-1-update-dependencies",level:4},{value:"Step 2: Update imports in your code",id:"step-2-update-imports-in-your-code",level:4},{value:"<code>@openc3/js-common</code>",id:"openc3js-common",level:4},{value:"<code>@openc3/vue-common</code>",id:"openc3vue-common",level:4},{value:"Migrating From COSMOS 4 to COSMOS 5",id:"migrating-from-cosmos-4-to-cosmos-5",level:2},{value:"Configuration Migration Tool",id:"configuration-migration-tool",level:3},{value:"Upgrading Custom Tools",id:"upgrading-custom-tools",level:3}];function a(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components},{TabItem:t,Tabs:s}=n;return t||p("TabItem",!0),s||p("Tabs",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"cosmos-upgrades",children:"COSMOS Upgrades"}),"\n",(0,i.jsx)(n.p,{children:"OpenC3 releases new versions of COSMOS on a monthy or better cadence. This is done for several reasons: to incorporate new features, fix existing bugs, update dependencies, and close CVEs. We extensively test each release at both the unit level, API level, and system level using Playwright against a deployed COSMOS. Thus we recommend upgrading COSMOS as quickly as possible when new releases become available. While COSMOS itself is tested extensively, we obviously can not test against customer plugins and custom deployments. We recommend having another installation of COSMOS which you can upgrade with your own plugins and verify functionality before upgrading your production environment."}),"\n",(0,i.jsx)(n.p,{children:"COSMOS is released as Docker containers. Since we're using Docker containers and volumes we can simply stop the existing COSMOS application, apply the upgrade, and run the new release."}),"\n",(0,i.jsx)(n.admonition,{title:"Release Notes",type:"info",children:(0,i.jsxs)(n.p,{children:["Always check the release notes associated with the release on the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/releases",children:"releases"})," page. Sometimes there are migration notes. When upgrading older versions, be sure to upgrade to first 5.13.0 and then 6.0.0 before proceeding. See ",(0,i.jsx)(n.a,{href:"https://docs.openc3.com/docs/getting-started/upgrading#upgrade-migration-process",children:"Upgrade Migration Process"})," for more information."]})}),"\n",(0,i.jsxs)(n.p,{children:["This example assumes an existing COSMOS project at ",(0,i.jsx)(n.code,{children:"cosmos-project"}),". This should first be performed on a non-production machine that has the same set of plugins as your production system."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Stop the current COSMOS application"}),"\n"]}),"\n",(0,i.jsxs)(s,{groupId:"script-language",children:[(0,i.jsx)(t,{value:"linux",label:"Linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cosmos-project % ./openc3.sh stop\n"})})}),(0,i.jsx)(t,{value:"windows",label:"Windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\cosmos-project> openc3.bat stop\n"})})})]}),"\n",(0,i.jsxs)(n.admonition,{title:"Upgrade is new since v6.7.0",type:"info",children:[(0,i.jsx)(n.p,{children:"Before version 6.7.0 the COSMOS cli did not have an upgrade option. If you are on a version prior to COSMOS 6.10.1, simply check out the latest version of the upgrade script."}),(0,i.jsxs)(s,{groupId:"script-language",children:[(0,i.jsx)(t,{value:"linux",label:"Linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cosmos-project % git checkout main -- openc3.sh scripts/linux/openc3_upgrade.sh\n"})})}),(0,i.jsx)(t,{value:"windows",label:"Windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\cosmos-project> git checkout main -- openc3.bat scripts/windows/openc3_upgrade.bat\n"})})})]}),(0,i.jsxs)(n.p,{children:["You can also manually download the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project/blob/main/scripts/linux/openc3_upgrade.sh",children:(0,i.jsx)(n.code,{children:"openc3_upgrade.sh"})})," or ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project/blob/main/scripts/windows/openc3_upgrade.bat",children:(0,i.jsx)(n.code,{children:"openc3_upgrade.bat"})})," script and put it in the ",(0,i.jsx)(n.code,{children:"scripts/linux"})," or ",(0,i.jsx)(n.code,{children:"scripts/windows"})," directory of your COSMOS project."]}),(0,i.jsxs)(n.p,{children:["For step by step instructions see our ",(0,i.jsx)(n.a,{href:"https://youtu.be/Z3o1RACKE74?si=ngoo9tmrmB2O2OgC",children:"COSMOS Upgrade"})," video on our ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/@openc3",children:"YouTube Channel"}),"."]})]}),"\n",(0,i.jsx)(n.p,{children:"\xa0\n\xa0"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Apply the upgrade to version vX.Y.Z (e.g. v6.10.3). Note the 'v' because this is a git tag."}),"\n"]}),"\n",(0,i.jsxs)(s,{groupId:"script-language",children:[(0,i.jsx)(t,{value:"linux",label:"Linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cosmos-project % ./openc3.sh upgrade vX.Y.Z\n"})})}),(0,i.jsx)(t,{value:"windows",label:"Windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\cosmos-project> openc3.bat upgrade vX.Y.Z\n"})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Run the new COSMOS version"}),"\n"]}),"\n",(0,i.jsxs)(s,{groupId:"script-language",children:[(0,i.jsx)(t,{value:"linux",label:"Linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cosmos-project % ./openc3.sh run\n"})})}),(0,i.jsx)(t,{value:"windows",label:"Windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\cosmos-project> openc3.bat run\n"})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Test the new COSMOS version. Ensure your plugins start without errors. Verify you can graph or export data from before the upgrade. Perhaps run some of your scripts in disconnect mode."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Commit the changes to the project"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s,{groupId:"script-language",children:[(0,i.jsx)(t,{value:"linux",label:"Linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'cosmos-project % git add .\ncosmos-project % git commit -m "Upgrade to vX.Y.Z"\n'})})}),(0,i.jsx)(t,{value:"windows",label:"Windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:'C:\\cosmos-project> git add .\nC:\\cosmos-project> git commit -m "Upgrade to vX.Y.Z"\n'})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Update the production system by stopping, pulling the new changes, and starting."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"upgrade-migration-process",children:"Upgrade Migration Process"}),"\n",(0,i.jsxs)(n.p,{children:["COSMOS doesn't use strict ",(0,i.jsx)(n.a,{href:"https://semver.org/",children:"semantic versioning"})," for our releases. Our major releases (5.0.0, 6.0.0, etc) are for major architectural changes and backward incompatibilities. Minor releases (6.1.0, 6.2.0, etc) add functionality but can also modify our configuration files. Thus certain minor releases are more important than others when skipping releases."]}),"\n",(0,i.jsx)(n.p,{children:"The following table identifies key release milestones which changed the COSMOS project configuration files (.env, compose.yaml, traefik, etc)."}),"\n",(0,i.jsxs)(n.p,{children:["Versions 5.13.0 and 6.0.0 ",(0,i.jsx)(n.em,{children:"REQUIRE"})," a stop to evaluate the upgrade. Thus if you're currently at 5.9.0 you must first upgrade to 5.13.0, then 6.0.0, then to the latest."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Version"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Summary"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["*",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/releases/tag/v5.13.0",children:"5.13.0"}),"*"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Breaking change to non-root containers and renamed minio volume. Requires running the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project/blob/v5.13.0.0/migrate_5_12_to_5_13.sh",children:"Core migration shell script"})," / ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project/blob/v5.13.0.0/migrate_5_12_to_5_13.bat",children:"Core migration batch file"})," or ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-enterprise-project/blob/v5.13.0.0/migrate_5_12_to_5_13_enterprise.sh",children:"Enterprise migration shell script"})," / ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-enterprise-project/blob/v5.13.0.0/migrate_5_12_to_5_13_enterprise.bat",children:"Enterprise migration batch file"})," to preserve previous data.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"NOTE: Read the script! The You must set ",(0,i.jsx)(n.code,{children:"GITHUB_PAT"})," in Enterprise or simply comment out the lines with ",(0,i.jsx)(n.code,{children:"GITHUB_PAT"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/releases/tag/v5.15.0",children:"5.15.0"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"The internal Traefik port was changed to 2900 to match our standard external port and to better support unprivileged runtime environments."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["*",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/releases/tag/v6.0.0",children:"6.0.0"}),"*"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Upgrade to Vue 3 and Vuetify 3 requires custom GUI tools to follow the ",(0,i.jsx)(n.a,{href:"upgrading#migrating-from-cosmos-5-to-cosmos-6",children:"COSMOS 6 migration guide"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/releases/tag/v6.1.0",children:"6.1.0"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Changed from ActionCable to AnyCable. We also broke apart the COSMOS helm charts from a single chart to 3 charts."})]})]})]}),"\n",(0,i.jsxs)(n.admonition,{title:"Downgrades",type:"warning",children:[(0,i.jsx)(n.p,{children:"Downgrades are not necessarily supported. When upgrading COSMOS we need to upgrade databases and sometimes migrate internal data structures. While we perform a full regression test on every release, we recommend upgrading an individual machine with your specific plugins and do local testing before rolling out the upgrade to your production system."}),(0,i.jsxs)(n.p,{children:["In general, patch releases (x.y.Z) can be downgraded, minor releases (x.Y.z) ",(0,i.jsx)(n.em,{children:"might"})," be able to be downgraded and major releases (X.y.z) are NOT able to be downgraded."]})]}),"\n",(0,i.jsx)(n.h2,{id:"upgrading-from-cosmos-core-to-cosmos-enterprise",children:"Upgrading from COSMOS Core to COSMOS Enterprise"}),"\n",(0,i.jsx)(n.p,{children:"Going from COSMOS Core (open source) to COSMOS Enterprise (OpenC3 customer) is a straight forward process that will preserve all your data collected by COSMOS Core."}),"\n",(0,i.jsxs)(n.p,{children:["First ensure you are on the latest version of the Core project by following the upgrade steps above. Next follow the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-enterprise-project",children:"Enterprise Project README"})," to set up your Personal Access Token (this assumes you've already been given access to the project by the OpenC3 team). Finally simply run the upgrade script with the word ",(0,i.jsx)(n.code,{children:"enterprise-"})," before the version."]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You previously cloned ",(0,i.jsx)(n.code,{children:"cosmos-project"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["From your current ",(0,i.jsx)(n.code,{children:"cosmos-project"})," directory, stop the current COSMOS application"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"openc3.sh stop\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Upgrade to the latest version of COSMOS Core"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"git checkout main -- openc3.sh scripts/linux/openc3_upgrade.sh\nopenc3.sh upgrade v6.10.3\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Start, test and verify functionality"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"openc3.sh run\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Stop the current COSMOS application and commit your changes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'openc3.sh stop\ngit add .\ngit commit -m "Upgrade to vX.Y.Z"\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Upgrade to Enterprise (assumes PAT has been created)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"openc3.sh upgrade enterprise-v6.10.3\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Start, test and verify functionality. Note your browser may cache COSMOS Core. If you're not seeing Enterprise tools wait a minute and refresh your browser."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"openc3.sh run\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsx)(n.li,{children:"Commit your changes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'git add .\ngit commit -m "Upgrade to Enterprise vX.Y.Z"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"migrating-from-cosmos-6-to-cosmos-7",children:"Migrating From COSMOS 6 to COSMOS 7"}),"\n",(0,i.jsxs)(n.p,{children:["We removed and deprecated a number of ",(0,i.jsx)(n.a,{href:"../guides/scripting-api#migration-from-cosmos-v6-to-v7",children:"API methods"})," in COSMOS 7."]}),"\n",(0,i.jsx)(n.h3,{id:"passwords",children:"Passwords"}),"\n",(0,i.jsx)(n.p,{children:"If you are using COSMOS Enterprise, you can skip this section. COSOMS 7 Core introduces some security enhancements around the handling of the user password."}),"\n",(0,i.jsxs)(n.p,{children:["First, we have switched the password hashing algorithm from SHA-256 to the industry standard argon2id. Before you can log in using COSMOS 7, you need to migrate the stored password hash used for user authentication. To do this, with Redis running, set the ",(0,i.jsx)(n.code,{children:"OPENC3_API_PASSWORD"})," environment variable to your current password and run ",(0,i.jsx)(n.code,{children:"openc3.sh cli migratepassword"}),". You can do this at any point of the upgrade process while COSMOS is running (e.g. either before tearing down COSMOS 6 or after starting up COSMOS 7)."]}),"\n",(0,i.jsxs)(n.p,{children:["Second, the JSON API no longer accepts plaintext passwords. You must instead use a session token. Please see the note at the bottom of our ",(0,i.jsx)(n.a,{href:"../development/json-api#further-debugging",children:"JSON API documentation"})," for how to acquire a session token for the API."]}),"\n",(0,i.jsx)(n.h3,{id:"minio-to-versitygw-migration",children:"MINIO to Versitygw Migration"}),"\n",(0,i.jsxs)(n.p,{children:["COSMOS 7 replaces MINIO with ",(0,i.jsx)(n.a,{href:"https://github.com/versity/versitygw",children:"Versity Gateway (versitygw)"})," as the S3-compatible storage backend. Versitygw uses a POSIX filesystem backend rather than MINIO's internal object format, so existing data must be migrated via the S3 API. A migration script is provided at ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/blob/main/scripts/linux/openc3_migrate_s3.sh",children:(0,i.jsx)(n.code,{children:"scripts/linux/openc3_migrate_s3.sh"})})," that handles this automatically. The script runs the MINIO client (",(0,i.jsx)(n.code,{children:"mc"}),") via Docker, so no local installation is required."]}),"\n",(0,i.jsx)(n.h4,{id:"migration-script-commands",children:"Migration Script Commands"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Command"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"start"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Start temporary containers needed for migration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"migrate"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Mirror data from MINIO to versitygw (idempotent)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"status"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Check migration status and compare bucket contents"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"cleanup"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Remove temporary migration containers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"help"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Show usage information"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The script is ",(0,i.jsx)(n.strong,{children:"idempotent"})," \u2014 it uses ",(0,i.jsx)(n.code,{children:"mc mirror --preserve"})," which only copies new or changed files, making it safe to run multiple times. This enables incremental syncing to minimize downtime."]}),"\n",(0,i.jsx)(n.h4,{id:"recommended-migration-workflow",children:"Recommended Migration Workflow"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option A: Pre-Migration (Minimizes Downtime)"})}),"\n",(0,i.jsx)(n.p,{children:"Pre-migrate your data while COSMOS 6 is still running, then perform a final sync after shutdown:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. While COSMOS 6 is running, do the initial data migration\n./scripts/linux/openc3_migrate_s3.sh start\n./scripts/linux/openc3_migrate_s3.sh migrate\n\n# 2. Stop COSMOS 6\n./openc3.sh stop\n\n# 3. Upgrade to COSMOS 7\n./openc3.sh upgrade v7.0.0\n\n# 4. Run a final migration to sync any data written since the first migration\n./scripts/linux/openc3_migrate_s3.sh migrate\n\n# 5. Verify and clean up\n./scripts/linux/openc3_migrate_s3.sh status\n./scripts/linux/openc3_migrate_s3.sh cleanup\n\n# 6. Start COSMOS 7\n./openc3.sh run\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option B: Post-Migration"})}),"\n",(0,i.jsx)(n.p,{children:"Stop COSMOS 6 first, then migrate after upgrading:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. Stop COSMOS 6\n./openc3.sh stop\n\n# 2. Upgrade to COSMOS 7 and start (versitygw will be running)\n./openc3.sh upgrade v7.0.0\n./openc3.sh run\n\n# 3. Migrate all data from old MINIO volume to the running versitygw\n./scripts/linux/openc3_migrate_s3.sh migrate\n\n# 4. Verify your data migrated correctly\n./scripts/linux/openc3_migrate_s3.sh status\n\n# 5. Clean up temporary containers\n./scripts/linux/openc3_migrate_s3.sh cleanup\n"})}),"\n",(0,i.jsx)(n.h4,{id:"custom-credentials",children:"Custom Credentials"}),"\n",(0,i.jsxs)(n.p,{children:["If you customized your bucket credentials in your ",(0,i.jsx)(n.code,{children:".env"})," file, pass them as environment variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# COSMOS 6 MINIO credentials (check your old .env file)\nMINIO_ROOT_USER=your_user MINIO_ROOT_PASSWORD=your_pass ./scripts/linux/openc3_migrate_s3.sh migrate\n\n# COSMOS 7 versitygw credentials (check your current .env file)\nOPENC3_BUCKET_USERNAME=your_user OPENC3_BUCKET_PASSWORD=your_pass ./scripts/linux/openc3_migrate_s3.sh migrate\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Variable"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"OLD_VOLUME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Source MINIO volume name"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3-bucket-v"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"NEW_VOLUME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Destination versitygw volume name"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3-object-v"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"MINIO_ROOT_USER"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"MINIO access key (COSMOS 6 source)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3minio"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"MINIO_ROOT_PASSWORD"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"MINIO secret key (COSMOS 6 source)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3miniopassword"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"OPENC3_BUCKET_USERNAME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"versitygw access key (COSMOS 7 dest)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3bucket"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"OPENC3_BUCKET_PASSWORD"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"versitygw secret key (COSMOS 7 dest)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"openc3bucketpassword"})})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Docker Compose Volume Prefixes",type:"tip",children:(0,i.jsxs)(n.p,{children:["The migration script automatically detects Docker Compose project prefixes. For example, if your volumes are named ",(0,i.jsx)(n.code,{children:"cosmos_openc3-bucket-v"})," instead of ",(0,i.jsx)(n.code,{children:"openc3-bucket-v"}),", the script handles this without additional configuration. You can also specify custom volume names with the ",(0,i.jsx)(n.code,{children:"OLD_VOLUME"})," and ",(0,i.jsx)(n.code,{children:"NEW_VOLUME"})," environment variables."]})}),"\n",(0,i.jsx)(n.p,{children:"After verifying COSMOS 7 works correctly, you can remove the old MINIO volume:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker volume rm openc3-bucket-v\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cosmos-configuration-changes",children:"COSMOS Configuration Changes"}),"\n",(0,i.jsx)(n.h4,{id:"removed",children:"Removed"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"rubysloc"})," CLI command"]})," \u2014 The ",(0,i.jsx)(n.code,{children:"./openc3.sh cli rubysloc"})," command has been removed. Use external tools for line counting if needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"LOG_RAW"})})," \u2014 Previously deprecated in favor of ",(0,i.jsx)(n.code,{children:"LOG_STREAM"}),". Now fully removed. Replace any ",(0,i.jsx)(n.code,{children:"LOG_RAW"})," usage with ",(0,i.jsx)(n.a,{href:"/docs/configuration/plugins",children:(0,i.jsx)(n.code,{children:"LOG_STREAM"})}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reducer microservices"})," \u2014 All reduced data microservices (REDUCED_MINUTE, REDUCED_HOUR, REDUCED_DAY) have been removed. Reduced data is now handled by QuestDB using ",(0,i.jsx)(n.code,{children:"SAMPLE BY"})," queries. You can safely delete all REDUCED_MINUTE, REDUCED_HOUR, and REDUCED_DAY data once you perform the ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/openc3-cosmos-tsdb-migration",children:"TSDB Migration"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"deprecated-keywords-silently-ignored",children:"Deprecated Keywords (Silently Ignored)"}),"\n",(0,i.jsx)(n.p,{children:"The following target configuration keywords are silently ignored during parsing and can be safely removed from your plugin configuration files:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Deprecated Keyword"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Replacement"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_LOG_CYCLE_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_LOG_CYCLE_SIZE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"CMD_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_LOG_CYCLE_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_LOG_CYCLE_SIZE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"TLM_DECOM_RETAIN_TIME"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCED_MINUTE_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCED_HOUR_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCED_DAY_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCED_LOG_RETAIN_TIME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCER_DISABLE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCER_DISABLED"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCER_MAX_CPU_UTILIZATION"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"REDUCED_MAX_CPU_UTILIZATION"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"No replacement (removed)"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"new-keywords",children:"New Keywords"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"CMD_DECOM_RETAIN_TIME"})})," \u2014 Sets the retention time for command decommutation data in QuestDB. Accepts a time value with a unit suffix: ",(0,i.jsx)(n.code,{children:"h"})," (hours), ",(0,i.jsx)(n.code,{children:"d"})," (days), ",(0,i.jsx)(n.code,{children:"w"})," (weeks), ",(0,i.jsx)(n.code,{children:"M"})," (months), or ",(0,i.jsx)(n.code,{children:"y"})," (years). Example: ",(0,i.jsx)(n.code,{children:"CMD_DECOM_RETAIN_TIME 30d"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"TLM_DECOM_RETAIN_TIME"})})," \u2014 Sets the retention time for telemetry decommutation data in QuestDB. Same format as above. Example: ",(0,i.jsx)(n.code,{children:"TLM_DECOM_RETAIN_TIME 1y"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"migrating-from-cosmos-5-to-cosmos-6",children:"Migrating From COSMOS 5 to COSMOS 6"}),"\n",(0,i.jsxs)(n.p,{children:["We removed a few rarely used ",(0,i.jsx)(n.a,{href:"../guides/scripting-api#migration-from-cosmos-v5-to-v6",children:"API methods"})," in COSMOS 6."]}),"\n",(0,i.jsx)(n.admonition,{title:"Developers Only",type:"info",children:(0,i.jsx)(n.p,{children:"If you haven't written any custom tools or widgets, there are no special changes required to upgrade from COSMOS 5 to COSMOS 6 other than updating your traefik configuration file. Simply follow the normal upgrade instructions above."})}),"\n",(0,i.jsxs)(n.p,{children:["COSMOS 6 introduces some breaking changes for custom tools regarding the Vue framework and our common library code. We've upgraded from Vue 2 (EOL December 31, 2023) to Vue 3. These versions of Vue are not compatible with each other, so any tools written with Vue 2 will need to be updated. Additionally, our ",(0,i.jsx)(n.code,{children:"@openc3/tool-common"})," NPM package has been deprecated with its functionality reorganized into two packages: ",(0,i.jsx)(n.code,{children:"@openc3/js-common"})," and ",(0,i.jsx)(n.code,{children:"@openc3/vue-common"}),". This is to provide a better experience for developers who are building COSMOS tools without the Vue framework."]}),"\n",(0,i.jsxs)(n.p,{children:["We also removed a few rarely used ",(0,i.jsx)(n.a,{href:"../guides/scripting-api#migration-from-cosmos-v5-to-v6",children:"API methods"})," in COSMOS 6."]}),"\n",(0,i.jsx)(n.h3,{id:"updating-vue",children:"Updating Vue"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"If your tool was not built with Vue (e.g. it was built without a frontend framework, or it was built with React, Angular, etc.), then you can skip this section."})}),"\n",(0,i.jsx)(n.h4,{id:"the-quick-and-dirty-way",children:"The quick and dirty way"}),"\n",(0,i.jsxs)(n.p,{children:["Tools that are relatively simple can probably be upgraded in one shot by just updating the dependencies and fixing any build errors that arise, and then fixing any runtime errors you find from testing and using your tool. If you're confident in this upgrade path, you can reference ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/pull/1747",children:"this pull request"})," to see what will need to change. Otherwise, the rest of this guide will walk you through a more in-depth and complete migration process."]}),"\n",(0,i.jsx)(n.h4,{id:"step-1-vue-compat-mode",children:"Step 1: Vue compat mode"}),"\n",(0,i.jsx)(n.p,{children:"The Vue team provided a compatibility mode to help with migrating from Vue 2 to Vue 3. This will let you get your tool up and running to make it easier to find the necessary changes."}),"\n",(0,i.jsx)(n.h5,{id:"1a-update-dependencies",children:"(1.a) Update dependencies"}),"\n",(0,i.jsx)(n.p,{children:'Use your package manager or edit the package.json file to update the following dependencies (ignore any packages marked "Update" that you aren\'t using)'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Remove:"})," ",(0,i.jsx)(n.code,{children:"vue-template-compiler"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"@vue/compat"})," >= 3.5 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@vue/compat",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"@vue/compiler-sfc"})," >= 3.5 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@vue/compiler-sfc",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"@vue/test-utils"})," >= 2.4 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@vue/compiler-sfc",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"vue"})," >= 3.5 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/vue",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"vuex"})," >= 4.1 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/vuex",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"vue-router"})," >= 4.4 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/vue-router",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"vuetify"})," >= 3.7 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/vuetify",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update:"})," ",(0,i.jsx)(n.code,{children:"single-spa-vue"})," >= 3.0 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/single-spa-vue",children:"npmjs.com"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Eslint will help call out changes you'll need to make to your code for the migration, so it's recommended to include eslint in your project if you haven't already. There are plenty of guides online that will explain how to do that. If you're using eslint, then make the additional changes to your tool's dependencies:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"eslint-plugin-vuetify"})," >= 2.5 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-vuetify",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"vue-eslint-parser"})," >= 9.4 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/vue-eslint-parser",children:"npmjs.com"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you modified your package.json file manually, don't forget to ",(0,i.jsx)(n.code,{children:"pnpm install"})," at your project's root to apply the changes."]}),"\n",(0,i.jsxs)(n.h5,{id:"1b-update-the-vue-config-file-vueconfigjs",children:["(1.b) Update the Vue config file (",(0,i.jsx)(n.code,{children:"vue.config.js"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["You likely have a ",(0,i.jsx)(n.code,{children:"chainWebpack"})," property in the object that's exported by this file which looks something like this (though your contents might vary)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"chainWebpack: (config) => {\n  config.module\n    .rule('vue')\n    .use('vue-loader')\n    .tap((options) => {\n      return {\n        prettify: false,\n      }\n    })\n},\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add a resolution alias for ",(0,i.jsx)(n.code,{children:"@vue/compat"})," to the top of this block and set the compiler to use the Vue 2 compat mode:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"chainWebpack: (config) => {\n  config.resolve.alias.set('vue', '@vue/compat') // Add this line\n  config.module\n    .rule('vue')\n    .use('vue-loader')\n    .tap((options) => {\n      return {\n        prettify: false,\n        compilerOptions: { // Add this block\n          compatConfig: {  //\n            MODE: 2,       //\n          },               //\n        },                 // to here\n      }\n    })\n},\n"})}),"\n",(0,i.jsxs)(n.h5,{id:"1c-update-the-eslint-config-file-eslintrc",children:["(1.c) Update the eslint config file (",(0,i.jsx)(n.code,{children:".eslintrc"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["Find the string ",(0,i.jsx)(n.code,{children:"'plugin:vue/essential'"})," in your ",(0,i.jsx)(n.code,{children:"extends"})," block and change it to ",(0,i.jsx)(n.code,{children:"'plugin:vue/vue3-essential'"}),". If you don't have that plugin in your ",(0,i.jsx)(n.code,{children:"extends"})," block, or you're missing that block entirely, then add this. It will help find breaking changes in how your code is using the Vue API."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"extends: [\n  'plugin:vue/vue3-essential', // change this from plugin:vue/essential\n  'plugin:prettier/recommended',\n  '@vue/prettier',\n],\n"})}),"\n",(0,i.jsx)(n.h5,{id:"1d-fix-build-and-runtime-warnings-and-errors",children:"(1.d) Fix build and runtime warnings and errors"}),"\n",(0,i.jsxs)(n.p,{children:["Run your linting and build scripts (e.g. ",(0,i.jsx)(n.code,{children:"pnpm lint"})," and ",(0,i.jsx)(n.code,{children:"pnpm build"}),"). The eslint plugin and Vue's compat mode will find the first set of code changes you need to address. Fix these lint/build errors until your project builds successfully."]}),"\n",(0,i.jsxs)(n.p,{children:["Once it builds, run your project like you would for development. It's recommended to serve it from a local dev server with ",(0,i.jsx)(n.code,{children:"pnpm serve"})," and add it to the import map overrides in the browser. Test the functionality of your tool and address any Vue errors and warnings that get printed to the browser console in the dev tools. ",(0,i.jsxs)(n.em,{children:["(NOTE: On ",(0,i.jsx)(n.code,{children:"MODE: 2"})," - your first pass through this section - it's ok if your tool doesn't completely work yet. Just address the warnings and errors that are logged to the browser console. You'll get your tool completely working in the next step.)"]})]}),"\n",(0,i.jsxs)(n.p,{children:["From our experience migrating the COSMOS first-party tools, you'll most likely have to make changes to your ",(0,i.jsx)(n.code,{children:"main.js"})," and ",(0,i.jsx)(n.code,{children:"router.js"}),' files at a minimum. You can reference the PR mentioned above in the "The quick and dirty way" section above to see what we changed, or search the internet for Vue 2 -> Vue 3 migration guides if you need help addressing any warnings or errors.']}),"\n",(0,i.jsx)(n.h4,{id:"step-2-bump-compat-mode-from-2-to-3",children:"Step 2: Bump compat mode from 2 to 3"}),"\n",(0,i.jsxs)(n.p,{children:["Change the ",(0,i.jsx)(n.code,{children:"compatConfig"})," you added to your vue config file (",(0,i.jsx)(n.code,{children:"vue.config.js"}),") from ",(0,i.jsx)(n.code,{children:"MODE: 2"})," to ",(0,i.jsx)(n.code,{children:"MODE: 3"}),". This will tell Vue's compat mode that you've addressed the changes in the previous step, and it will find the next set of issues (since this is a multi-step process). Repeat the \"(1.d) Fix build and runtime warnings and errors\" step."]}),"\n",(0,i.jsx)(n.h4,{id:"step-3-update-vuetify",children:"Step 3: Update Vuetify"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"If you're not using Vuetify, you can skip this step."})}),"\n",(0,i.jsxs)(n.p,{children:["Modify your eslint config (",(0,i.jsx)(n.code,{children:".eslintrc"}),") again to add the Vuetify plugin:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"extends: [\n  'plugin:vue/vue3-essential',\n  'plugin:vuetify/base', // Add this line\n  'plugin:prettier/recommended',\n  '@vue/prettier',\n],\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," The Vuetify eslint plugin is only designed for migrating projects from Vuetify 2 to Vuetify 3 and can cause linting performance issues, so it should be removed once your tool migration is complete."]}),"\n",(0,i.jsxs)(n.p,{children:["Again in ",(0,i.jsx)(n.code,{children:".eslintrc"}),", find your ",(0,i.jsx)(n.code,{children:"parserOptions"})," block and add the ",(0,i.jsx)(n.code,{children:"parser"})," property above it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"parser: 'vue-eslint-parser', // Add this line\nparserOptions: {\n  ...\n},\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now when you run eslint, it can tell you about any changes you'll need to address regarding how your code is using the Vuetify API. To find these changes, run eslint on your Vue files (e.g. ",(0,i.jsx)(n.code,{children:"pnpm eslint . --ext .vue"}),"). You can address these manually, or if you trust eslint or have good version control, you can have the plugin fix most of them automatically with ",(0,i.jsx)(n.code,{children:"pnpm eslint . --ext .vue --fix"})]}),"\n",(0,i.jsxs)(n.p,{children:["Lastly, if you are using the Astro UXDS icons via Vuetify from COSMOS - or any custom icon packs for that matter - then you'll need to change their pack alias format from ",(0,i.jsx)(n.code,{children:"$packName-"})," to ",(0,i.jsx)(n.code,{children:"packName:"}),". Here's an example for the ",(0,i.jsx)(n.code,{children:"antenna-transmit"})," Astro icon:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!-- Vue 2 / Vuetify 2 (old) --\x3e\n<v-icon> $astro-antenna-transmit </v-icon>\n\n\x3c!-- Vue 3 / Vuetify 3 (new) --\x3e\n<v-icon> astro:antenna-transmit </v-icon>\n"})}),"\n",(0,i.jsx)(n.h4,{id:"step-4-clean-up",children:"Step 4: Clean up"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Remove the ",(0,i.jsx)(n.code,{children:"@vue/compat"})," and ",(0,i.jsx)(n.code,{children:"eslint-plugin-vuetify"})," dependencies you added in step 1.a"]}),"\n",(0,i.jsxs)(n.li,{children:["Remove the ",(0,i.jsx)(n.code,{children:"compatConfig"})," you added in step 1.b"]}),"\n",(0,i.jsxs)(n.li,{children:["Remove the ",(0,i.jsx)(n.code,{children:"'plugin:vuetify/base'"})," you added in step 3"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"migrating-to-the-new-openc3-common-packages",children:"Migrating to the new OpenC3 common packages"}),"\n",(0,i.jsxs)(n.p,{children:["As mentioned in the first paragraph of this guide, we've deprecated the ",(0,i.jsx)(n.code,{children:"@openc3/tool-common"})," NPM package. All of its functionality has remained the same, but everything is organized differently, so you'll have to update your dependencies and imports."]}),"\n",(0,i.jsx)(n.h4,{id:"step-1-update-dependencies",children:"Step 1: Update dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Use your package manager or edit the package.json file to update the following dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Remove:"})," ",(0,i.jsx)(n.code,{children:"@openc3/tool-common"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"@openc3/js-common"})," >= 6.0 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@openc3/js-common",children:"npmjs.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add:"})," ",(0,i.jsx)(n.code,{children:"@openc3/vue-common"})," >= 6.0 (",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@openc3/vue-common",children:"npmjs.com"}),")","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This is only needed if you are using our Vue stuff (components, plugins, etc.)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"step-2-update-imports-in-your-code",children:"Step 2: Update imports in your code"}),"\n",(0,i.jsxs)(n.p,{children:["In COSMOS 5, things were imported directly from ",(0,i.jsx)(n.code,{children:"@openc3/tool-common"}),"'s ",(0,i.jsx)(n.code,{children:"src"})," directory and subsequently built into your tool by your build process. Everything in COSMOS 6 is now exported through several top-level exports in our new common packages. In general, the pattern is as follows:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["COSMOS 5: ",(0,i.jsx)(n.code,{children:"import bar from '@openc3/tool-common/src/foo/bar'"})]}),"\n",(0,i.jsxs)(n.li,{children:["COSMOS 6: ",(0,i.jsx)(n.code,{children:"import { bar } from '@openc3/vue-common/foo'"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This pattern also lets you combine multiple import statements into one (e.g. ",(0,i.jsx)(n.code,{children:"import { bar, baz } from '@openc3/vue-common/foo'"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"There are three exceptions to this pattern:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Widgets are no longer under the ",(0,i.jsx)(n.code,{children:"components"})," directory but instead get their own top-level export","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Old: ",(0,i.jsx)(n.code,{children:"import foo from '@openc3/tool-common/src/components/widgets/Foo"})]}),"\n",(0,i.jsxs)(n.li,{children:["New: ",(0,i.jsx)(n.code,{children:"import { foo } from '@openc3/vue-common/widgets"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Icons got the same treatment","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Old: ",(0,i.jsx)(n.code,{children:"import bar from '@openc3/tool-common/src/components/icons/Bar"})]}),"\n",(0,i.jsxs)(n.li,{children:["New: ",(0,i.jsx)(n.code,{children:"import { bar } from '@openc3/vue-common/icons"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"TimeFilters"})," mixin was moved from ",(0,i.jsx)(n.code,{children:"tools/base"})," to ",(0,i.jsx)(n.code,{children:"util"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Old: ",(0,i.jsx)(n.code,{children:"import TimeFilters from '@openc3/tool-common/src/tools/base/util/timeFilters"})]}),"\n",(0,i.jsxs)(n.li,{children:["New: ",(0,i.jsx)(n.code,{children:"import { TimeFilters } from '@openc3/vue-common/util"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"openc3js-common",children:(0,i.jsx)(n.code,{children:"@openc3/js-common"})}),"\n",(0,i.jsxs)(n.p,{children:["This package contains things previously under ",(0,i.jsx)(n.code,{children:"@openc3/tool-common/src/services"}),". Anything not from that path will be in the ",(0,i.jsx)(n.code,{children:"vue-common"})," package discussed below."]}),"\n",(0,i.jsx)(n.p,{children:"Update any of your imports from that path accordingly. Here's an example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// COSMOS 5 (old)\nimport Api from "@openc3/tool-common/src/services/api";\nimport Cable from "@openc3/tool-common/src/services/cable";\nimport { OpenC3Api } from "@openc3/tool-common/src/services/openc3Api";\n\n// COSMOS 6 (new)\nimport { Api, Cable, OpenC3Api } from "@openc3/js-common/services";\n'})}),"\n",(0,i.jsx)(n.p,{children:"This package also provides a couple more top-level imports which you likely will not need, but they might be useful, so I'll call them out here:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"import { prependBasePath } from '@openc3/js-common/utils"})," provides a function that will prepend the base path (e.g. localhost:2900) to Vue Router ",(0,i.jsx)(n.code,{children:"route"})," objects and their children. This can be useful if you run into certain quirks with single-spa and vue-router 4's routing logic where you need the full path. You can see how we use it ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/blob/f0193f4146e28e1cd383732763a9d27d84b5ca71/openc3-cosmos-init/plugins/packages/openc3-cosmos-tool-cmdtlmserver/src/router.js#L76",children:"here"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"import { devServerPlugin } from '@openc3/js-common/viteDevServerPlugin"}),". This Vite plugin is a temporary hack to run a local dev server for tools when migrating from webpack/vue-cli. It should be replaced with Vite's built-in ",(0,i.jsx)(n.code,{children:"vite dev"})," dev server, but that's currently not working - at least in our first-party COSMOS tools. You can see how we use it ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/blob/f0193f4146e28e1cd383732763a9d27d84b5ca71/openc3-cosmos-init/plugins/packages/openc3-cosmos-tool-cmdtlmserver/vite.config.js#L37",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"openc3vue-common",children:(0,i.jsx)(n.code,{children:"@openc3/vue-common"})}),"\n",(0,i.jsxs)(n.p,{children:["This package provides all the shared Vue components we use to build our first-party tools. The main top-level exports are ",(0,i.jsx)(n.code,{children:"components"}),", ",(0,i.jsx)(n.code,{children:"icons"}),", ",(0,i.jsx)(n.code,{children:"plugins"}),", ",(0,i.jsx)(n.code,{children:"util"}),", and ",(0,i.jsx)(n.code,{children:"widgets"}),". There are also some tool-specific exports that we built for code sharing with COSMOS Enterprise, which you might find useful: ",(0,i.jsx)(n.code,{children:"tool/base"}),", ",(0,i.jsx)(n.code,{children:"tool/admin"}),", and ",(0,i.jsx)(n.code,{children:"tool/calendar"}),". Here's an example, but again, reference the pattern mentioned above."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// COSMOS 5 (old)\nimport DetailsDialog from "@openc3/tool-common/src/components/DetailsDialog";\nimport Graph from "@openc3/tool-common/src/components/Graph";\nimport Notify from "@openc3/tool-common/src/plugins/notify";\nimport TimeFilters from "@openc3/tool-common/src/tools/base/util/timeFilters";\nimport VWidget from "@openc3/tool-common/src/components/widgets/VWidget";\n\n// COSMOS 6 (new)\nimport { DetailsDialog, Graph } from "@openc3/vue-common/components";\nimport { Notify } from "@openc3/vue-common/plugins";\nimport { TimeFilters } from "@openc3/vue-common/util";\nimport { VWidget } from "@openc3/vue-common/widgets";\n'})}),"\n",(0,i.jsx)(n.h2,{id:"migrating-from-cosmos-4-to-cosmos-5",children:"Migrating From COSMOS 4 to COSMOS 5"}),"\n",(0,i.jsx)(n.admonition,{title:"All COSMOS Users",type:"info",children:(0,i.jsx)(n.p,{children:"All COSMOS 4 users must upgrade their configuration to 5. However, the command, telemetry and screen definitions (keywords and syntax) have remained the same."})}),"\n",(0,i.jsxs)(n.p,{children:["COSMOS 5 is a new architecture and treats targets as independent ",(0,i.jsx)(n.a,{href:"/docs/configuration/plugins",children:"plugins"}),". Thus the primary effort in porting from COSMOS 4 to COSMOS 5 is converting targets to plugins. We recommend creating plugins for each independent target (with its own interface) but targets which share an interface will need to be part of the same plugin. The reason for independent plugins is it allows the plugin to be versioned separately and more easily shared outside your specific project. If you have very project specific targets (e.g. custom hardware) those can potentially be combined for ease of deployment."]}),"\n",(0,i.jsxs)(n.p,{children:["We also removed and renamed a number of ",(0,i.jsx)(n.a,{href:"../guides/scripting-api#migration-from-cosmos-v4-to-v5",children:"API methods"})," in COSMOS 5."]}),"\n",(0,i.jsx)(n.h3,{id:"configuration-migration-tool",children:"Configuration Migration Tool"}),"\n",(0,i.jsx)(n.p,{children:"COSMOS 5 (but not COSMOS 6) includes a migration tool for converting an existing COSMOS 4 configuration into a COSMOS 5 plugin. This example assumes an existing COSMOS 4 configuration at C:\\COSMOS and a new COSMOS 5 installation at C:\\cosmos-project. Linux users can adjust paths and change from .bat to .sh to follow along."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Change to the existing COSMOS 4 configuration directory. You should see the config, lib, procedures, outputs directory. You can then run the migration tool by specifying the absolute path to the COSMOS 5 installation."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\COSMOS> C:\\cosmos-project\\openc3.bat cli migrate -a demo\n"})}),"\n",(0,i.jsx)(n.p,{children:"This creates a new COSMOS 5 plugin called openc3-cosmos-demo with a target named DEMO containing the existing lib and procedures files as well as all the existing targets."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-batch",children:"C:\\COSMOS> C:\\cosmos-project\\openc3.bat cli migrate demo-part INST\n"})}),"\n",(0,i.jsx)(n.p,{children:"This would create a new COSMOS 5 plugin called openc3-cosmos-demo-part with a target named DEMO_PART containing the existing lib and procedures files as well as the INST target (but no others)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the new COSMOS 5 plugin and ensure the ",(0,i.jsx)(n.a,{href:"/docs/configuration/plugins#plugintxt-configuration-file",children:"plugin.txt"})," file is correctly configured. The migration tool doesn't create VARIABLEs or MICROSERVICEs or handle target substitution so those features will have to added manually."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Follow the ",(0,i.jsx)(n.a,{href:"/docs/getting-started/gettingstarted#building-your-plugin",children:"building your plugin"})," part of the Getting Started tutorial to build your new plugin and upload it to COSMOS 5."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"upgrading-custom-tools",children:"Upgrading Custom Tools"}),"\n",(0,i.jsxs)(n.p,{children:["COSMOS 4 was a Qt Desktop based application. COSMOS 5 is a completely new architecture which runs natively in the browser using ",(0,i.jsx)(n.a,{href:"https://vuejs.org/",children:"Vue.js"})," as the Javascript framework and ",(0,i.jsx)(n.a,{href:"https://vuetifyjs.com/en/",children:"Vuetify"})," as the GUI library. We utilize ",(0,i.jsx)(n.a,{href:"https://single-spa.js.org/",children:"single-spa"})," to allow you to write COSMOS tool plugins in any language and provide ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/tree/main/openc3/templates",children:"templates"})," for Vue.js (recommended), Angular, React and Svelte. Any COSMOS 4 custom tools will have to be completely re-written to run in COSMOS 5. We recommend using the native COSMOS ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos/tree/main/openc3-cosmos-init/plugins/packages",children:"tools"})," and finding GUI concepts and functionality that best match the tool you're trying to re-create."]}),"\n",(0,i.jsxs)(n.p,{children:["If you need custom development get in touch at ",(0,i.jsx)(n.a,{href:"mailto:sales@openc3.com",children:"sales@openc3.com"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function p(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},9496:function(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(9471);let i={},o=s.createContext(i);function r(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);