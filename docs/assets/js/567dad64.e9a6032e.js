"use strict";(self.webpackChunkdocs_openc3_com=self.webpackChunkdocs_openc3_com||[]).push([["7271"],{6766:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>l,toc:()=>a,default:()=>h,metadata:()=>i,assets:()=>t,contentTitle:()=>r});var i=JSON.parse('{"id":"getting-started/util","title":"Utility Commands","description":"Using openc3.sh util","source":"@site/docs/getting-started/util.md","sourceDirName":"getting-started","slug":"/getting-started/util","permalink":"/docs/getting-started/util","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/getting-started/util.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Utility Commands","description":"Using openc3.sh util","sidebar_custom_props":{"myEmoji":"\u2328\uFE0F"}},"sidebar":"defaultSidebar","previous":{"title":"Command Line Interface","permalink":"/docs/getting-started/cli"},"next":{"title":"Code Generators","permalink":"/docs/getting-started/generators"}}'),o=s(7259),c=s(5511);let l={sidebar_position:6,title:"Utility Commands",description:"Using openc3.sh util",sidebar_custom_props:{myEmoji:"\u2328\uFE0F"}},r,t={},a=[{value:"Encode",id:"encode",level:2},{value:"Hash",id:"hash",level:2},{value:"Save",id:"save",level:2},{value:"Load",id:"load",level:2},{value:"Tag",id:"tag",level:2},{value:"Push",id:"push",level:2},{value:"Clean",id:"clean",level:2},{value:"Hostsetup",id:"hostsetup",level:2},{value:"Hostenter",id:"hostenter",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The COSMOS Util is a command on ",(0,o.jsx)(n.code,{children:"openc3.sh"})," and ",(0,o.jsx)(n.code,{children:"openc3.bat"})," which are included in the COSMOS ",(0,o.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project",children:"project"})," (more about ",(0,o.jsx)(n.a,{href:"key-concepts#projects",children:"projects"}),")."]}),"\n",(0,o.jsxs)(n.p,{children:["If you followed the ",(0,o.jsx)(n.a,{href:"/docs/getting-started/installation",children:"Installation Guide"})," you should already be inside a cloned ",(0,o.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project",children:"cosmos-project"})," which is in your PATH (necessary for openc3.bat / openc3.sh to be resolved)."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"The utility script automatically detects and uses either Docker or Podman. If Docker is not found, it will use Podman as a fallback. If neither is available, the script will exit with an error."})}),"\n",(0,o.jsx)(n.p,{children:"To see all the available commands, type the following:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util\nUsage: scripts/linux/openc3_util.sh [encode, hash, save, load, tag, push, clean, hostsetup]\n*  encode: encode a string to base64\n*  hash: hash a string using SHA-256\n*  save: save images to a tar file\n*  load: load images from a tar file\n*  tag: tag images\n*  push: push images\n*  clean: remove node_modules, coverage, etc\n*  hostsetup: configure host for redis\n*  hostenter: sh into vm host\n"})}),"\n",(0,o.jsx)(n.h2,{id:"encode",children:"Encode"}),"\n",(0,o.jsx)(n.p,{children:"Encode a string to base64. This is useful for encoding credentials or configuration values."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util encode foo\nZm9v\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"encode <STRING>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"STRING"}),": The string to encode"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"hash",children:"Hash"}),"\n",(0,o.jsx)(n.p,{children:"Hash a string using SHA-256. This is useful for generating checksums or verifying data integrity."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util hash foo\n2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"hash <STRING>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"STRING"}),": The string to hash"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"save",children:"Save"}),"\n",(0,o.jsxs)(n.p,{children:["Save images to tar file. This command pulls all COSMOS Docker images from the specified repository and saves them as tar files in the ",(0,o.jsx)(n.code,{children:"tmp/"})," directory."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util save docker.io openc3inc 5.19.0\n+ docker pull docker.io/openc3inc/openc3-ruby:5.19.0\n+ docker pull docker.io/openc3inc/openc3-node:5.19.0\n...\n+ docker save docker.io/openc3inc/openc3-ruby:5.19.0 -o tmp/openc3-ruby-5.19.0.tar\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"save <REPO> <NAMESPACE> <TAG> <SUFFIX>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REPO"}),": Docker repository (e.g., docker.io)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"NAMESPACE"}),": Image namespace (e.g., openc3inc)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG"}),": Image tag/version (e.g., 5.19.0)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"SUFFIX"}),": (Optional) Image name suffix for custom builds"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"load",children:"Load"}),"\n",(0,o.jsxs)(n.p,{children:["Load images from tar files in the ",(0,o.jsx)(n.code,{children:"tmp/"})," directory. This command loads all COSMOS Docker images from previously saved tar files."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util load 5.19.0\n+ docker load -i tmp/openc3-ruby-5.19.0.tar\n+ docker load -i tmp/openc3-node-5.19.0.tar\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"load <TAG> <SUFFIX>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG"}),': (Optional) Image tag/version (defaults to "latest")']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"SUFFIX"}),": (Optional) Image name suffix for custom builds"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example loading latest:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util load\n+ docker load -i tmp/openc3-ruby-latest.tar\n...\n"})}),"\n",(0,o.jsx)(n.h2,{id:"tag",children:"Tag"}),"\n",(0,o.jsx)(n.p,{children:"Tag images from one repository/namespace to another. This is useful for pushing images to a local registry or retagging for different deployments."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util tag docker.io localhost:12345 openc3inc latest\n+ docker tag docker.io/openc3inc/openc3-ruby:latest localhost:12345/openc3inc/openc3-ruby:latest\n+ docker tag docker.io/openc3inc/openc3-node:latest localhost:12345/openc3inc/openc3-node:latest\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"tag <REPO1> <REPO2> <NAMESPACE1> <TAG1> <NAMESPACE2> <TAG2> <SUFFIX>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REPO1"}),": Source repository (e.g., docker.io)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REPO2"}),": Destination repository (e.g., localhost:12345)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"NAMESPACE1"}),": Source namespace (e.g., openc3inc)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG1"}),": Source tag (e.g., latest)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"NAMESPACE2"}),": (Optional) Destination namespace (defaults to NAMESPACE1)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG2"}),": (Optional) Destination tag (defaults to TAG1)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"SUFFIX"}),": (Optional) Image name suffix for custom builds"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example with different namespace and tag:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util tag docker.io localhost:12345 openc3inc latest mycompany 1.0.0\n"})}),"\n",(0,o.jsx)(n.h2,{id:"push",children:"Push"}),"\n",(0,o.jsx)(n.p,{children:"Push all COSMOS Docker images to a remote repository."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util push localhost:12345 openc3inc latest\n+ docker push localhost:12345/openc3inc/openc3-ruby:latest\n+ docker push localhost:12345/openc3inc/openc3-node:latest\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"push <REPO> <NAMESPACE> <TAG> <SUFFIX>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REPO"}),": Docker repository (e.g., localhost:12345)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"NAMESPACE"}),": Image namespace (e.g., openc3inc)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG"}),": Image tag (e.g., latest)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"SUFFIX"}),": (Optional) Image name suffix for custom builds"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"clean",children:"Clean"}),"\n",(0,o.jsx)(n.p,{children:"Remove development artifacts and lock files from the repository. This command helps clean up your workspace."}),"\n",(0,o.jsx)(n.p,{children:"What gets cleaned:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["All ",(0,o.jsx)(n.code,{children:"node_modules"})," directories (removed automatically)"]}),"\n",(0,o.jsxs)(n.li,{children:["All ",(0,o.jsx)(n.code,{children:"coverage"})," directories (removed automatically)"]}),"\n",(0,o.jsxs)(n.li,{children:["All ",(0,o.jsx)(n.code,{children:"pnpm-lock.yaml"})," files (prompts for confirmation)"]}),"\n",(0,o.jsxs)(n.li,{children:["All ",(0,o.jsx)(n.code,{children:"Gemfile.lock"})," files (prompts for confirmation)"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util clean\nRemoving ./openc3/node_modules\nRemoving ./openc3-cosmos-init/plugins/node_modules\n...\nremove ./pnpm-lock.yaml? y\nremove ./openc3/Gemfile.lock? y\n...\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note"}),": This command will prompt you before removing lock files to prevent accidental deletion."]}),"\n",(0,o.jsx)(n.h2,{id:"hostsetup",children:"Hostsetup"}),"\n",(0,o.jsx)(n.p,{children:"Configure the Docker/Podman host VM for Redis requirements. This command sets kernel parameters needed for optimal Redis performance."}),"\n",(0,o.jsx)(n.p,{children:"This command configures:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Disables transparent huge pages (THP)"}),"\n",(0,o.jsxs)(n.li,{children:["Sets ",(0,o.jsx)(n.code,{children:"vm.max_map_count"})," to 262144"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util hostsetup docker.io openc3inc latest\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"hostsetup <REPO> <NAMESPACE> <TAG>"})]}),"\n",(0,o.jsx)(n.p,{children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"REPO"}),": Docker repository containing the operator image"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"NAMESPACE"}),": Image namespace (e.g., openc3inc)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"TAG"}),": Image tag (e.g., latest)"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note"}),": This command requires privileged access and is typically run once during initial setup or when Redis warnings appear."]}),"\n",(0,o.jsx)(n.h2,{id:"hostenter",children:"Hostenter"}),"\n",(0,o.jsx)(n.p,{children:"Open a shell into the Docker/Podman host VM. This is useful for debugging and inspecting the host environment."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-zsh",children:"\u276F ./openc3.sh util hostenter\nUnable to find image 'alpine:3.21.4' locally\n3.21.4: Pulling from library/alpine\nDigest: sha256:b6a6be0ff92ab6db8acd94f5d1b7a6c2f0f5d10ce3c24af348d333ac6da80685\nStatus: Downloaded newer image for alpine:3.21.4\nsh-5.2# uname -a\nLinux docker-desktop 6.10.4-linuxkit #1 SMP PREEMPT_DYNAMIC Thu Aug  8 14:33:14 UTC 2024 aarch64 Linux\nsh-5.2# exit\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Usage"}),": ",(0,o.jsx)(n.code,{children:"hostenter"})]}),"\n",(0,o.jsx)(n.p,{children:"No parameters required."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Environment Variables"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"OPENC3_DEPENDENCY_REGISTRY"}),": Registry for the Alpine image (defaults if not set)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ALPINE_VERSION"}),": Alpine Linux version"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ALPINE_BUILD"}),": Alpine Linux build number"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note"}),": This command requires privileged access and opens an interactive shell. Type ",(0,o.jsx)(n.code,{children:"exit"})," to leave the host shell."]})]})}function h(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},5511:function(e,n,s){s.d(n,{R:()=>l,x:()=>r});var i=s(6363);let o={},c=i.createContext(o);function l(e){let n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);