<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/subpackets" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Subpackets and Channels | OpenC3 Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://docs.openc3.com/docs/guides/subpackets /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Subpackets and Channels | OpenC3 Docs"/><meta data-rh=true name=description content="How COSMOS handles channelized telemetry and different time series"/><meta data-rh=true property=og:description content="How COSMOS handles channelized telemetry and different time series"/><link data-rh=true rel=icon href=/img/favicon.png /><link data-rh=true rel=canonical href=https://docs.openc3.com/docs/guides/subpackets /><link data-rh=true rel=alternate href=https://docs.openc3.com/docs/guides/subpackets hreflang=en /><link data-rh=true rel=alternate href=https://docs.openc3.com/docs/guides/subpackets hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.openc3.com/docs/guides","name":"Guides","position":1},{"@type":"ListItem","item":"https://docs.openc3.com/docs/guides/subpackets","name":"Subpackets and Channels","position":2}]}</script><link rel=stylesheet href=/assets/css/styles.050d3b6a.css /><script src=/assets/js/runtime~main.e5d7fd73.js defer></script><script src=/assets/js/main.215b72ea.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_qOfk href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="OpenC3 Logo" class="themedComponent_ZvL8 themedComponent--light_RYIK"/><img src=/img/logo.svg alt="OpenC3 Logo" class="themedComponent_ZvL8 themedComponent--dark_Uy6A"/></div><b class="navbar__title text--truncate">OpenC3 Docs</b></a><a href=https://openc3.com target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Home</a><a href=https://openc3.com/enterprise/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Enterprise</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs>Documentation</a><a href=https://openc3.com/news/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">News</a><a href=https://openc3.com/contact/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Contact</a><a href=https://openc3.com/about/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">About</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/OpenC3/cosmos target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="toggle_TrV1 colorModeToggle_aQ9L"><button class="clean-btn toggleButton_HWKQ toggleButtonDisabled_NaUv" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_JJdA lightToggleIcon_QAoA"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_JJdA darkToggleIcon_KnJu"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_JJdA systemToggleIcon_jOK6"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_gn0B><div class=navbar__search><span aria-label="expand searchbar" role=button class=search-icon tabindex=0></span><input id=search_input_react type=search placeholder=Loading... aria-label=Search class="navbar__search-input search-bar" disabled/></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_MNjx"><div class=docsWrapper_U6pW><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Zx9e" type=button></button><div class=docRoot_WlTO><aside class="theme-doc-sidebar-container docSidebarContainer_JrhQ"><div class=sidebarViewport_aHzs><div class=sidebar_Zs6D><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Fdb4"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs><span title=Introduction class=linkLabel_W2vP>Introduction</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist" href=/docs/getting-started><span title="Getting Started" class=categoryLinkLabel_kxse>Getting Started</span></a><button aria-label="Expand sidebar category 'Getting Started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist" href=/docs/configuration><span title=Configuration class=categoryLinkLabel_kxse>Configuration</span></a><button aria-label="Expand sidebar category 'Configuration'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist" href=/docs/tools><span title=Tools class=categoryLinkLabel_kxse>Tools</span></a><button aria-label="Expand sidebar category 'Tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist menu__link--active" href=/docs/guides><span title=Guides class=categoryLinkLabel_kxse>Guides</span></a><button aria-label="Collapse sidebar category 'Guides'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/bridges><span title=Bridges class=linkLabel_W2vP>Bridges</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/cfs><span title="COSMOS and NASA cFS" class=linkLabel_W2vP>COSMOS and NASA cFS</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/curl><span title="Testing with Curl" class=linkLabel_W2vP>Testing with Curl</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/custom-widgets><span title="Custom Widgets" class=linkLabel_W2vP>Custom Widgets</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/dynamic-packets><span title="Dynamic Packets" class=linkLabel_W2vP>Dynamic Packets</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/exposing-microservices><span title="Exposing Microservices" class=linkLabel_W2vP>Exposing Microservices</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/little-endian-bitfields><span title="Little Endian Bitfields" class=linkLabel_W2vP>Little Endian Bitfields</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/local-mode><span title="Local Mode" class=linkLabel_W2vP>Local Mode</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/logging><span title=Logging class=linkLabel_W2vP>Logging</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/monitoring><span title=Monitoring class=linkLabel_W2vP>Monitoring</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/packet-types><span title="Packet Types" class=linkLabel_W2vP>Packet Types</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/performance><span title=Performance class=linkLabel_W2vP>Performance</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/raspberrypi><span title="Raspberry Pi" class=linkLabel_W2vP>Raspberry Pi</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/reference-architectures><span title="Reference Architectures" class=linkLabel_W2vP>Reference Architectures</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/roles-permissions><span title="Roles and Permissions" class=linkLabel_W2vP>Roles and Permissions</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/script-writing><span title="Script Writing Guide" class=linkLabel_W2vP>Script Writing Guide</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/scripting-api><span title="Scripting API Guide" class=linkLabel_W2vP>Scripting API Guide</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/guides/subpackets><span title="Subpackets and Channels" class=linkLabel_W2vP>Subpackets and Channels</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/guides/troubleshooting><span title=Troubleshooting class=linkLabel_W2vP>Troubleshooting</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist" href=/docs/development><span title=Development class=categoryLinkLabel_kxse>Development</span></a><button aria-label="Expand sidebar category 'Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_xRfu menu__link menu__link--sublist" href=/docs/meta><span title=Meta class=categoryLinkLabel_kxse>Meta</span></a><button aria-label="Expand sidebar category 'Meta'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/privacy><span title="OpenC3, Inc. Privacy Policy" class=linkLabel_W2vP>OpenC3, Inc. Privacy Policy</span></a></ul></nav></div></div></aside><main class=docMainContainer_HlEo><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_DhTU"><div class=docItemContainer_nzR9><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_XktS" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YXXP><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/guides><span>Guides</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Subpackets and Channels</span></ul></nav><div class="tocCollapsible_KSbj theme-doc-toc-mobile tocMobile_HRWM"><button type=button class="clean-btn tocCollapsibleButton_ztnW">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Subpackets and Channels</h1></header><p>The unit of processing within COSMOS is a packet. Telemetry packets coming into COSMOS are delineated and identified in Interfaces, and sometimes the same is done for commands being received by Routers.</p>
<p>Packets are also the unit of data that COSMOS keeps track of with timestamps. Each packet has a received time (the time that COSMOS received the packet), and a packet time (the real time that the packet data was generated which is usually derived from the packet's own data). If no packet time is available then packet time is set to the received time.</p>
<p>Each packet item therefore is part of a time-series with one sample per packet which can be graphed in <a class="" href=/docs/tools/tlm-grapher>Telemetry Grapher</a>, extracted by <a class="" href=/docs/tools/data-extractor>Data Extractor</a> or played back in <a class="" href=/docs/tools/tlm-viewer>Telemetry Viewer</a>.</p>
<p>However there are three primary use cases where this abstraction doesn't work as well as desired.</p>
<h2 class="anchor anchorTargetStickyNavbar_RY7L" id=channelized-telemetry>Channelized Telemetry<a href=#channelized-telemetry class=hash-link aria-label="Direct link to Channelized Telemetry" title="Direct link to Channelized Telemetry" translate=no>​</a></h2>
<p>Systems that produce channelized telemetry generally send down a single packet of telemetry that has variable content. The content within these packets are called channels.</p>
<p>Each channel has some form of id field that allows you to identify the channel data. Sometimes each channel has its own timestamp and sometimes the packet timestamp is applied to each channel.</p>
<p>For example, you might have a 32-bit id field, followed by a 64-bit timestamp field, followed by a structure that is unknown until you look up what the 32-bit id field references.</p>
<p>Channelized telemetry packets are therefore very dynamic and until COSMOS 6.10 were very difficult to define.</p>
<p>COSMOS 6.10 introduced the concepts of <a class="" href=/docs/configuration/telemetry#subpacket>SUBPACKET</a> and <a class="" href=/docs/configuration/telemetry#subpacketizer>SUBPACKETIZER</a> in order to handle channelized telemetry (and the other use case described below).</p>
<h2 class="anchor anchorTargetStickyNavbar_RY7L" id=repeated-values-in-the-same-packet>Repeated Values in the Same Packet<a href=#repeated-values-in-the-same-packet class=hash-link aria-label="Direct link to Repeated Values in the Same Packet" title="Direct link to Repeated Values in the Same Packet" translate=no>​</a></h2>
<p>The other use case for subpackets is when you have a single packet that has a lot of samples of the same data point in the same packet. Historically COSMOS would put all of these samples into an array item but that has several downsides.</p>
<p>The primary downside is that you couldn't graph the data like a time series in <a class="" href=/docs/tools/tlm-grapher>Telemetry Grapher</a>. Each of the samples generally has its own timestamp (typically derived from a known data rate), but that wasn't usable in <a class="" href=/docs/tools/tlm-grapher>Telemetry Grapher</a>, because there is only one timestamp per packet.</p>
<p>Using a <a class="" href=/docs/configuration/telemetry#subpacketizer>SUBPACKETIZER</a> to breakup each sample into its own <a class="" href=/docs/configuration/telemetry#subpacket>SUBPACKET</a> solves this problem, and makes the entire series of subpackets available to <a class="" href=/docs/tools/tlm-grapher>Telemetry Grapher</a> to graph.</p>
<h2 class="anchor anchorTargetStickyNavbar_RY7L" id=optional-content>Optional content<a href=#optional-content class=hash-link aria-label="Direct link to Optional content" title="Direct link to Optional content" translate=no>​</a></h2>
<p>COSMOS packet definitions expect every item in the packet to be present. Subpackets can also be used for optional content by having the Subpacketizer only return the optional content if it is present.</p>
<h2 class="anchor anchorTargetStickyNavbar_RY7L" id=defining-a-subpacket>Defining a Subpacket<a href=#defining-a-subpacket class=hash-link aria-label="Direct link to Defining a Subpacket" title="Direct link to Defining a Subpacket" translate=no>​</a></h2>
<p>Defining a <a class="" href=/docs/configuration/telemetry#subpacket>SUBPACKET</a> is easy. All it requires is adding the SUBPACKET keyword to the packet definition. Note that both commands and telemetry packets can be marked as <a class="" href=/docs/configuration/telemetry#subpacket>SUBPACKET</a>, but only telemetry is currently processed in any meaningful way.</p>
<p>Subpackets will generally have id fields that the subpacketizer code can use to differentiate them.</p>
<p>Here is an example of what would be one of many possible subpackets in a channelized telemetry scenario in F-Prime. Note that the packet has the <a class="" href=/docs/configuration/telemetry#subpacket>SUBPACKET</a> marking, and includes ID items:</p>
<div class="theme-tabs-container tabs-container tabList_o6yA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_Ddjc tabs__item--active">Python Subpacketizer<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_Ddjc">Ruby Subpacketizer</ul><div class=margin-top--md><div role=tabpanel class=tabItem_vRSr><div class="language-python codeBlockContainer_d67u theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_h_fg><pre tabindex=0 class="prism-code language-python codeBlock_tuGp thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_D9ES><span class=token-line style=color:#d6deeb><span class="token plain">TELEMETRY </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token operator" style="color:rgb(127, 219, 202)">%=</span><span class="token plain"> target_name </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> ServerDeployment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rateGroup3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">RgMaxTime BIG_ENDIAN </span><span class="token string" style="color:rgb(173, 219, 103)">"Max execution time rate group"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  SUBPACKET</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ID_ITEM FPRIME_CHANNEL_ID </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT </span><span class="token number" style="color:rgb(247, 140, 108)">1024</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM FPRIME_TIMEBASE </span><span class="token number" style="color:rgb(247, 140, 108)">16</span><span class="token plain"> UINT</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    STATE TB_NONE </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># No time base has been established</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    STATE TB_PROC_TIME </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Indicates time is processor cycle time. Not tied to external time</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    STATE TB_WORKSTATION_TIME </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Time as reported on workstation where software is running</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    STATE TB_DONT_CARE </span><span class="token number" style="color:rgb(247, 140, 108)">0xFFFF</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM FPRIME_CONTEXT </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> UINT</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM FPRIME_TIME_SEC </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM FPRIME_TIME_USEC </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM RgMaxTime </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT </span><span class="token string" style="color:rgb(173, 219, 103)">"Max execution time rate group"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  ITEM PACKET_TIME </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> DERIVED </span><span class="token string" style="color:rgb(173, 219, 103)">"Python time based on FPRIME_TIME_SEC and FPRIME_TIME_USEC"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    READ_CONVERSION openc3</span><span class="token operator" style="color:rgb(127, 219, 202)">/</span><span class="token plain">conversions</span><span class="token operator" style="color:rgb(127, 219, 202)">/</span><span class="token plain">unix_time_conversion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">py FPRIME_TIME_SEC FPRIME_TIME_USEC</span><br/></span></code></pre></div></div></div><div role=tabpanel class=tabItem_vRSr hidden><div class="language-ruby codeBlockContainer_d67u theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_h_fg><pre tabindex=0 class="prism-code language-ruby codeBlock_tuGp thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_D9ES><span class=token-line style=color:#d6deeb><span class="token constant" style="color:rgb(130, 170, 255)">TELEMETRY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token operator" style="color:rgb(127, 219, 202)">%=</span><span class="token plain"> target_name </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> ServerDeployment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rateGroup3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">RgMaxTime </span><span class="token constant" style="color:rgb(130, 170, 255)">BIG_ENDIAN</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Max execution time rate group"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">SUBPACKET</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ID_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_CHANNEL_ID</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1024</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_TIMEBASE</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">16</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">STATE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">TB_NONE</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># No time base has been established</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">STATE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">TB_PROC_TIME</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Indicates time is processor cycle time. Not tied to external time</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">STATE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">TB_WORKSTATION_TIME</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Time as reported on workstation where software is running</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">STATE</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">TB_DONT_CARE</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xFFFF</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_CONTEXT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_TIME_SEC</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_TIME_USEC</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> RgMaxTime </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Max execution time rate group"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">PACKET_TIME</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DERIVED</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Ruby time based on FPRIME_TIME_SEC and FPRIME_TIME_USEC"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">READ_CONVERSION</span><span class="token plain"> unix_time_conversion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rb </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_TIME_SEC</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_TIME_USEC</span><br/></span></code></pre></div></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_RY7L" id=defining-a-subpacketizer>Defining a Subpacketizer<a href=#defining-a-subpacketizer class=hash-link aria-label="Direct link to Defining a Subpacketizer" title="Direct link to Defining a Subpacketizer" translate=no>​</a></h2>
<p>A <a class="" href=/docs/configuration/telemetry#subpacketizer>SUBPACKETIZER</a> is added to the parent packet with the code necessary to break it up into any internal subpackets.</p>
<p>Subpackets receive the parent packet as input and return an array of packets and subpackets as output. They can return as many subpackets as necessary, including no subpackets. Note that if the parent packet is not returned, then it will not be processed.</p>
<p>The following is an example Subpacketizer class that works with the F-Prime Flight Software. Note that this is just one example. A Subpacketizer can contain whatever code necessary to break the packet into subpackets.</p>
<div class="theme-tabs-container tabs-container tabList_o6yA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_Ddjc tabs__item--active">Python Subpacketizer<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_Ddjc">Ruby Subpacketizer</ul><div class=margin-top--md><div role=tabpanel class=tabItem_vRSr><div class="language-python codeBlockContainer_d67u theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_h_fg><pre tabindex=0 class="prism-code language-python codeBlock_tuGp thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_D9ES><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> openc3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">subpacketizers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">subpacketizer </span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> Subpacketizer</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> openc3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">system</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">system </span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> System</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">FprimeSubpacketizer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Subpacketizer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">call</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Create a list of packets to return</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Read the packet item "CHANNELS" which contains all the subpackets</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        channels </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"CHANNELS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># While we still have data to process</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">while</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">            </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Identify the next subpacket using the entire block of data</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">            subpacket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> System</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">telemetry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">identify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> target_names</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">target_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> subpackets</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># If it identified then breakout the subpacket content based on fixed size</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># (like the FIXED protocol)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">buffer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">defined_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                subpacket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">clone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Add to list of subpackets to return</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Remove this subpacket from the block of data</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                channels </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">defined_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># If we can't identify then just give up</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">                </span><span class="token keyword" style="color:rgb(127, 219, 202)">break</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Append the parent packet so it gets processed too</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Return the parent packet and subpackets</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> packets</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># The Subpacketizer is then referenced in a packet definition like this:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">TELEMETRY </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token operator" style="color:rgb(127, 219, 202)">%=</span><span class="token plain"> target_name </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> TELEMETRY BIG_ENDIAN </span><span class="token string" style="color:rgb(173, 219, 103)">"Channelized Telemetry Packet"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  SUBPACKETIZER fprime_subpacketizer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">py</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM FPRIME_SIZE </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ID_ITEM FPRIME_PACKET_ID </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  APPEND_ITEM CHANNELS </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> BLOCK</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    HIDDEN</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  ITEM CRC32 </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> UINT</span><br/></span></code></pre></div></div></div><div role=tabpanel class=tabItem_vRSr hidden><div class="language-ruby codeBlockContainer_d67u theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_h_fg><pre tabindex=0 class="prism-code language-ruby codeBlock_tuGp thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_D9ES><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"openc3/subpacketizers/subpacketizer"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"openc3/system/system"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">module</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">OpenC3</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">FprimeSubpacketizer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> Subpacketizer</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">call</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Create an array of packets to return</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Read the packet item "CHANNELS" which contains all the subpackets</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      channels </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"CHANNELS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># While we still have data to process</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">while</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Identify the next subpacket using the entire block of data</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        subpacket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> System</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">telemetry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">identify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">target_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token symbol">subpackets</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> subpacket</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># If it identified then breakout the subpacket content based on fixed size</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># (like the FIXED protocol)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">buffer </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0.</span><span class="token operator" style="color:rgb(127, 219, 202)">..</span><span class="token plain">subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">defined_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          subpacket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">clone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Add to list of subpackets to return</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          packets </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;&lt;</span><span class="token plain"> subpacket</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Remove this subpacket from the block of data</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          channels </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">subpacket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">defined_length</span><span class="token operator" style="color:rgb(127, 219, 202)">..</span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># If we can't identify then just give up</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">          </span><span class="token keyword" style="color:rgb(127, 219, 202)">break</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Append the parent packet so it gets processed too</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      packets </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;&lt;</span><span class="token plain"> packet</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Return the parent packet and subpackets</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> packets</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># The Subpacketizer is then referenced in a packet definition like this:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token constant" style="color:rgb(130, 170, 255)">TELEMETRY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token operator" style="color:rgb(127, 219, 202)">%=</span><span class="token plain"> target_name </span><span class="token operator" style="color:rgb(127, 219, 202)">%</span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">TELEMETRY</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">BIG_ENDIAN</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Channelized Telemetry Packet"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">SUBPACKETIZER</span><span class="token plain"> fprime_subpacketizer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">rb</span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_SIZE</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ID_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">FPRIME_PACKET_ID</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">APPEND_ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">CHANNELS</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">BLOCK</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token constant" style="color:rgb(130, 170, 255)">HIDDEN</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token constant" style="color:rgb(130, 170, 255)">ITEM</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">CRC32</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">32</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">UINT</span><span class="token plain"></span><br/></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_DYK5"><a href=https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/guides/subpackets.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_ppc9 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_hqDB"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/guides/scripting-api><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Scripting API Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/guides/troubleshooting><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Troubleshooting</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_LM4g thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#channelized-telemetry class="table-of-contents__link toc-highlight">Channelized Telemetry</a><li><a href=#repeated-values-in-the-same-packet class="table-of-contents__link toc-highlight">Repeated Values in the Same Packet</a><li><a href=#optional-content class="table-of-contents__link toc-highlight">Optional content</a><li><a href=#defining-a-subpacket class="table-of-contents__link toc-highlight">Defining a Subpacket</a><li><a href=#defining-a-subpacketizer class="table-of-contents__link toc-highlight">Defining a Subpacketizer</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Homepage</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://openc3.com target=_blank rel="noopener noreferrer" class=footer__link-item>Home</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs>Documentation</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.linkedin.com/company/openc3 target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_Hsa0><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/OpenC3/cosmos target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_Hsa0><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a class=footer__link-item href=/docs/privacy>Privacy</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 OpenC3, Inc.</div></div></div></footer></div></body>