<!doctype html><html lang=ja dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/script-writing" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>スクリプト作成ガイド | OpenC3 Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://docs.openc3.com/ja/docs/guides/script-writing><meta data-rh=true property=og:locale content=ja><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true name=docusaurus_locale content=ja><meta data-rh=true name=docsearch:language content=ja><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="スクリプト作成ガイド | OpenC3 Docs"><meta data-rh=true name=description content=スクリプト作成のための主要概念とベストプラクティス><meta data-rh=true property=og:description content=スクリプト作成のための主要概念とベストプラクティス><link data-rh=true rel=icon href=/ja/img/favicon.png><link data-rh=true rel=canonical href=https://docs.openc3.com/ja/docs/guides/script-writing><link data-rh=true rel=alternate href=https://docs.openc3.com/docs/guides/script-writing hreflang=en><link data-rh=true rel=alternate href=https://docs.openc3.com/ja/docs/guides/script-writing hreflang=ja><link data-rh=true rel=alternate href=https://docs.openc3.com/docs/guides/script-writing hreflang=x-default><link rel=stylesheet href=/ja/assets/css/styles.14dc8b06.css><script src=/ja/assets/js/runtime~main.1b6a4d1e.js defer></script><script src=/ja/assets/js/main.b8bc6894.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"dark",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/ja/img/logo.svg><div role=region aria-label=メインコンテンツまでスキップ><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>メインコンテンツまでスキップ</a></div><nav aria-label=ナビゲーション class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=ナビゲーションバーを開く aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/ja/><div class=navbar__logo><img src=/ja/img/logo.svg alt="OpenC3 ロゴ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/ja/img/logo.svg alt="OpenC3 ロゴ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenC3 ドキュメント</b></a><a href=https://openc3.com target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">ホーム</a><a href=https://openc3.com/enterprise/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Enterprise</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/ja/docs>ドキュメント</a><a href=https://openc3.com/news/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">ニュース</a><a href=https://openc3.com/contact/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">お問い合わせ</a><a href=https://openc3.com/about/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">会社概要</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>日本語</a><ul class=dropdown__menu><li><a href=/docs/guides/script-writing target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/ja/docs/guides/script-writing target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=ja>日本語</a></ul></div><a href=https://github.com/OpenC3/cosmos target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title=ダークモードを切り替える(現在はダークモード) aria-label=ダークモードを切り替える(現在はダークモード) aria-live=polite aria-pressed=true><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class=navbar__search><span aria-label="expand searchbar" role=button class=search-icon tabindex=0></span><input id=search_input_react type=search placeholder=Loading... aria-label=Search class="navbar__search-input search-bar" disabled></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=先頭へ戻る class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label=ドキュメントのサイドバー class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/ja/docs>紹介</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ja/docs/getting-started>はじめに</a><button aria-label="'はじめに'の目次を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ja/docs/configuration>設定</a><button aria-label="'設定'の目次を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ja/docs/tools>ツール</a><button aria-label="'ツール'の目次を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/ja/docs/guides>ガイド</a><button aria-label="'ガイド'の目次を隠す" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/bridges>ブリッジ</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/cfs>COSMOSとNASA cFS</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/custom-widgets>カスタムウィジェット</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/dynamic-packets>動的パケット</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/exposing-microservices>マイクロサービスの公開</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/little-endian-bitfields>リトルエンディアンのビットフィールド</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/local-mode>ローカルモード</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/logging>ロギング</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/monitoring>モニタリング</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/performance>パフォーマンス</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/raspberrypi>Raspberry Pi</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/ja/docs/guides/script-writing>スクリプト作成ガイド</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ja/docs/guides/scripting-api>スクリプティング API ガイド</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ja/docs/development>開発</a><button aria-label="'開発'の目次を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ja/docs/meta>メタ情報</a><button aria-label="'メタ情報'の目次を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/ja/docs/privacy>OpenC3, Inc. Privacy Policy</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=パンくずリストのナビゲーション><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=ホームページ class=breadcrumbs__link href=/ja/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ja/docs/guides><span itemprop=name>ガイド</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>スクリプト作成ガイド</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>スクリプト作成ガイド</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id=はじめに>はじめに<a href=#はじめに class=hash-link aria-label="はじめに への直接リンク" title="はじめに への直接リンク">​</a></h2>
<p>このガイドは、COSMOSが提供するスクリプト機能を使用するためのベストプラクティスを提供することを目的としています。スクリプトは、運用やテストのための一連の活動を自動化するために使用されます。このドキュメントの目的は、シンプルで理解しやすく、保守可能で正確なスクリプトを作成することです。COSMOSスクリプトランナーの使用に関する主要な詳細についてもガイダンスを提供します。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=概念>概念<a href=#概念 class=hash-link aria-label="概念 への直接リンク" title="概念 への直接リンク">​</a></h2>
<p>COSMOSはスクリプト作成にRubyとPythonの両方をサポートしています。RubyとPythonは非常に似たスクリプト言語であり、このガイドのほとんどは両方に直接適用されます。例を使用する場合は、RubyとPythonの両方の例が示されています。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=cosmosでのruby対python>COSMOSでのRuby対Python<a href=#cosmosでのruby対python class=hash-link aria-label="COSMOSでのRuby対Python への直接リンク" title="COSMOSでのRuby対Python への直接リンク">​</a></h3>
<p>COSMOSスクリプトを書く際のRubyとPythonの間には多くの類似点といくつかの主要な違いがあります。</p>
<ol>
<li>行の長さに80文字の制限はありません。行の長さは好きなだけ長くできますが、スクリプトの印刷レビューが難しくなるため、あまり長くしないように注意してください。</li>
<li>インデントの空白：<!-- -->
<ol>
<li>Ruby: 重要ではありません。Rubyは<code>end</code>キーワードを使用して、2スペースを標準としたインデントされたコードブロックを決定します。</li>
<li>Python: 重要です。Pythonはインデントを使用して、4スペースを標準としたコードブロックを決定します。</li>
</ol>
</li>
<li>変数は事前に宣言する必要がなく、後で再割り当てできます。つまり、RubyとPythonは動的型付けです。</li>
<li>変数の補間：<!-- -->
<ol>
<li>Ruby: 変数値は<code>"#{variable}"</code>構文を使用して文字列に配置できます。</li>
<li>Python: 変数値は<code>f"{variable}"</code>構文を使用してf-stringに配置できます。</li>
</ol>
</li>
<li>ブロックやループ内で宣言された変数は、すでに宣言されていない限り、そのブロックの外側には存在しません。</li>
</ol>
<p>両言語はスクリプト作成者に多くの力を提供します。しかし、大きな力には大きな責任が伴います。スクリプトを書くときは、あなた自身や他の誰かが後でそれを理解する必要があることを忘れないでください。したがって、次のスタイルガイドラインを使用してください：</p>
<ul>
<li>インデントには一貫したスペースを使用し、タブを使用しないでください</li>
<li>定数はすべて大文字でアンダースコア付き<!-- -->
<ul>
<li><code>SPEED_OF_LIGHT = 299792458 # meters per s</code></li>
</ul>
</li>
<li>変数名とメソッド名は小文字でアンダースコア付き<!-- -->
<ul>
<li><code>last_name = "Smith"</code></li>
<li><code>perform_setup_operation()</code></li>
</ul>
</li>
<li>クラス名（使用する場合）はキャメルケースで、それらを含むファイルは小文字とアンダースコアで一致する必要があります<!-- -->
<ul>
<li><code>class DataUploader # in 'data_uploader.rb'</code></li>
<li><code>class CcsdsUtility: # in 'ccsds_utility.py'</code></li>
</ul>
</li>
<li>無意味なコメントを追加せず、代わりに意図を説明してください</li>
</ul>
<div style=clear:both></div>
<p>以下は良いRubyスタイルの例です：</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">load </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'TARGET/lib/upload_utility.rb'</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 実行を表示したくないライブラリ</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">load_utility </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'TARGET/lib/helper_utility.rb'</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 実行を表示したいライブラリ</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 定数を宣言</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token constant" style="color:rgb(130, 170, 255)">OUR_TARGETS</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST2'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 渡されたターゲット名の収集カウンターをクリア</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> CLEAR"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS == 0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">######################################</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 開始</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">######################################</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">helper </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">HelperUtility</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">helper</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">setup</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># すべてのターゲットで収集を実行</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token constant" style="color:rgb(130, 170, 255)">OUR_TARGETS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain">target</span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  collects </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> COLLECT with TYPE SPECIAL"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS == </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">collects </span><span class="token string-literal interpolation content operator" style="color:rgb(127, 219, 202)">+</span><span class="token string-literal interpolation content"> </span><span class="token string-literal interpolation content number" style="color:rgb(247, 140, 108)">1</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST2'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>以下は良いPythonスタイルの例です：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> openc3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">script </span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> TARGET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">lib</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">upload_utility </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 実行を表示したくないライブラリ</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">load_utility</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">'TARGET/lib/helper_utility.rb'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 実行を表示したいライブラリ</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 定数を宣言</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">OUR_TARGETS </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(173, 219, 103)">'INST2'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 渡されたターゲット名の収集カウンターをクリア</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> CLEAR"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS == 0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">######################################</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 開始</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">######################################</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">helper </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> HelperUtility</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">helper</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># すべてのターゲットで収集を実行</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> target </span><span class="token keyword" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> OUR_TARGETS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    collects </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> COLLECT with TYPE SPECIAL"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> HEALTH_STATUS COLLECTS == </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">collects </span><span class="token string-interpolation interpolation operator" style="color:rgb(127, 219, 202)">+</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation number" style="color:rgb(247, 140, 108)">1</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">clear_collects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">'INST2'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>両方の例はCOSMOSスクリプティングのいくつかの機能を示しています。'load'または'import'と'load_utility'の違いに注目してください。最初のものは実行時にScript Runnerで表示されない追加スクリプトを読み込むためのものです。これは画像分析や長時間実行するループコードなど、出力だけが欲しい場合に良い場所です。'load_utility'は何が起こっているかをユーザーに示すために、コードを1行ずつ視覚的に実行します。</p>
<p>次に定数を宣言し、OUR_TARGETSに文字列の配列を格納します。定数はすべて大文字でアンダースコア付きであることに注意してください。</p>
<p>次にclear_collectsという1つのローカルメソッドを宣言します。各メソッドの先頭には、それが何をするのか、およびそれが受け取るパラメータを説明するコメントを提供してください。</p>
<p>次に'helper_utility'が作成されます。クラス名と読み込んだファイル名の類似性に注意してください。</p>
<p>collect例では、以前に作成した文字列配列を反復処理し、コマンドやテレメトリをチェックする際に変数を使用する方法を示しています。Rubyのポンド括弧#{}記法とPythonのf文字列f"<!-- -->"記法は、変数が保持しているものを文字列に入れます。括弧内で追加のコードを実行することもできます。例えば、収集回数の増加をチェックするときのようにです。</p>
<p>最後に、ターゲット名を渡して各ターゲットに対して'clear_collects'メソッドを呼び出します。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプティングの哲学>スクリプティングの哲学<a href=#スクリプティングの哲学 class=hash-link aria-label="スクリプティングの哲学 への直接リンク" title="スクリプティングの哲学 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=基本的なスクリプト例>基本的なスクリプト例<a href=#基本的なスクリプト例 class=hash-link aria-label="基本的なスクリプト例 への直接リンク" title="基本的なスクリプト例 への直接リンク">​</a></h3>
<p>ほとんどのCOSMOSスクリプトは、システム/サブシステムにコマンドを送信し、そのコマンドが期待通りに機能したことを確認するという単純なパターンに分解できます。このパターンは通常、以下のようにcmd()の後にwait_check()を使用して実装されます：</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST COLLECT with TYPE NORMAL, TEMP 10.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS TYPE == 'NORMAL'"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>または同様に、コマンドの前にサンプリングされるカウンターを使用します。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">count </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS COLLECTS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST COLLECT with TYPE NORMAL, TEMP 10.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS COLLECTS >= </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">count </span><span class="token string-literal interpolation content operator" style="color:rgb(127, 219, 202)">+</span><span class="token string-literal interpolation content"> </span><span class="token string-literal interpolation content number" style="color:rgb(247, 140, 108)">1</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">count </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS COLLECTS"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"INST COLLECT with TYPE NORMAL, TEMP 10.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"INST HEALTH_STATUS COLLECTS >= </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">count </span><span class="token string-interpolation interpolation operator" style="color:rgb(127, 219, 202)">+</span><span class="token string-interpolation interpolation"> </span><span class="token string-interpolation interpolation number" style="color:rgb(247, 140, 108)">1</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>作成するCOSMOSスクリプトの90%は、コマンドが期待通りに機能したことを確認するために各コマンドの後に複数の項目をチェックする必要がある場合を除いて、上記のような単純なパターンであるべきです。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=kisskeep-it-simple-stupid>KISS（Keep It Simple Stupid）<a href=#kisskeep-it-simple-stupid class=hash-link aria-label="KISS（Keep It Simple Stupid） への直接リンク" title="KISS（Keep It Simple Stupid） への直接リンク">​</a></h3>
<p>RubyとPythonは非常に強力な言語であり、同じことを達成するための多くの方法があります。それを考慮すると、常に自分や他の人にとって最も理解しやすい方法を選択してください。複雑な1行コードや難解な正規表現を作成することも可能ですが、複雑な1行コードを展開し、正規表現を分解して文書化することで、後で自分自身に感謝することになるでしょう。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=drydont-repeat-yourself>DRY（Don't Repeat Yourself）<a href=#drydont-repeat-yourself class=hash-link aria-label="DRY（Don't Repeat Yourself） への直接リンク" title="DRY（Don't Repeat Yourself） への直接リンク">​</a></h3>
<p>任意のコマンドと制御システム用に書かれたスクリプトでの広範な問題は、同じコードブロックが複数回繰り返されることです。極端な場合、これは保守やレビューが不可能な10万行以上のスクリプトにつながることがあります。</p>
<p>繰り返しが現れる一般的な方法は2つあります：サブシステムの電源を入れるなどの一般的なアクションを実行するための正確なコードブロック、およびチェックされる助記語の名前またはチェックされる値のみが異なるコードブロックです。どちらもメソッド（または関数）を使用して繰り返しを削除することで解決されます。</p>
<p>例えば、サブシステムの電源を入れて正しいテレメトリを確保するスクリプトは次のようになります：</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">power_on_subsystem</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 100行のcmd()、wait_check()など</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">power_on_subsystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 100行のcmd()、wait_check()など</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>理想的には、上記のメソッドは他のスクリプトでも使用できるように別のファイルに保存されるべきです。それが真に1つのスクリプトでしか役に立たない場合は、ファイルの先頭に置くことができます。更新されたスクリプトは次のようになります：</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">power_on_subsystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 150行のサブシステム操作（例）</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># cmd(...)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># wait_check(...)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">#...</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">power_off_subystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 関連のないアクティビティ</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">power_on_subsystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># など</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>唯一の変更が助記語またはチェックされる値であるコードブロックは、引数を持つメソッドで置き換えることができます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">test_minimum_temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">enable_cmd_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> enable_tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> temp_tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> expected_temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"TARGET </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">enable_cmd_name</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> with ENABLE TRUE"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"TARGET </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">enable_tlm</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> == 'TRUE'"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"TARGET </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">temp_tlm</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> >= </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">expected_temp</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test_minimum_temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">enable_cmd_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> enable_tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> temp_tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> expected_temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"TARGET </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">enable_cmd_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> with ENABLE TRUE"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"TARGET </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">enable_tlm</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> == 'TRUE'"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"TARGET </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">temp_tlm</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> >= </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">expected_temp</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=コメントを適切に使用する>コメントを適切に使用する<a href=#コメントを適切に使用する class=hash-link aria-label="コメントを適切に使用する への直接リンク" title="コメントを適切に使用する への直接リンク">​</a></h3>
<p>あなたが行っていることが不明確な場合や、一連の行に高レベルの目的がある場合は、コメントを使用してください。コメント内に数字やその他の詳細を入れないようにしてください。それらは基礎となるコードと同期が取れなくなる可能性があります。RubyとPythonのコメントは#ポンド記号で始まり、行のどこにでも配置できます。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># このラインはアボートコマンドを送信します - 悪いコメント、不要</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST ABORT"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># キャリブレーションターゲットを見るためにジンバルを回転させる - 良いコメント</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST ROTATE with ANGLE 180.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 180度回転 - 悪いコメント</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプトランナー>スクリプトランナー<a href=#スクリプトランナー class=hash-link aria-label="スクリプトランナー への直接リンク" title="スクリプトランナー への直接リンク">​</a></h3>
<p>COSMOSはスクリプト（プロシージャとも呼ばれる）を実行するための2つのユニークな方法を提供します。スクリプトランナーはスクリプト実行環境とスクリプトエディタの両方を提供します。スクリプトエディタには、COSMOSメソッドとコマンド/テレメトリ項目名の両方のコード補完が含まれています。これはスクリプトを開発してテストするための優れた環境でもあります。スクリプトランナーは、長いスタイルのプロシージャを持つ従来のスクリプティングモデルに慣れているユーザーと、その場でスクリプトを編集できるようにしたいユーザーのためのフレームワークを提供します。</p>
<p>スイートファイル（'suite'という名前）を開くと、スクリプトランナーはより正式ですが、より強力なスクリプト実行環境を提供します。スイートファイルはスクリプトをスイート、グループ、およびスクリプト（個々のメソッド）に分割します。スイートは最高レベルの概念であり、通常、熱真空試験などの大規模な手順や、軌道上チェックアウトの実行などの大規模な運用シナリオをカバーします。グループは、特定のメカニズムに関するすべてのスクリプトなど、関連するスクリプトのセットをキャプチャします。グループはサブシステムに関連するスクリプトのコレクションや、RF検査などの特定の一連のテストである場合があります。スクリプトは合格または不合格のいずれかになる個々のアクティビティをキャプチャします。スクリプトランナーでは、スイート全体、1つ以上のグループ、または1つ以上のスクリプトを簡単に実行できます。また、タイミング、合格/不合格のカウントなどを含むレポートを自動的に生成します。</p>
<p>仕事に適した環境は個々のユーザー次第であり、多くのプログラムは両方のスクリプト形式を使用して目標を達成します。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ループ-vs-アンロールされたループ>ループ vs アンロールされたループ<a href=#ループ-vs-アンロールされたループ class=hash-link aria-label="ループ vs アンロールされたループ への直接リンク" title="ループ vs アンロールされたループ への直接リンク">​</a></h3>
<p>ループは、同じコードを何度も書き直す必要なく、同じ操作を複数回実行できる強力な構造です（DRYの概念を参照）。ただし、失敗した時点でCOSMOSスクリプトを再開するのが難しいか不可能になる場合があります。何かが失敗する可能性が低い場合、ループは優れた選択肢です。スクリプトがテレメトリポイントのリストでループを実行している場合、ループ本体をメソッドにしてから、発生するはずだったループの各繰り返しに対してそのメソッドを直接呼び出すことでループを「アンロール」する方が良い選択かもしれません。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token number" style="color:rgb(247, 140, 108)">10.</span><span class="token plain">times </span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain">temperature_number</span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">temperature_number </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> temperature_number </span><span class="token keyword" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">range</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">temperature_number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>上記のスクリプトが温度番号3の後に停止した場合、温度番号4でループを再開する方法はありません。ループカウントが少ない場合の良い解決策は、ループをアンロールすることです。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">check_temperature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>上記のアンロールされたバージョンでは、COSMOSの「選択した行からスクリプトを開始」機能を使用して、任意の点でスクリプトを再開できます。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプトの構成>スクリプトの構成<a href=#スクリプトの構成 class=hash-link aria-label="スクリプトの構成 への直接リンク" title="スクリプトの構成 への直接リンク">​</a></h2>
<p>すべてのスクリプトは<a href=/ja/docs/configuration/plugins>プラグイン</a>の一部である必要があります。SCRIPTSやPROCEDURESなどの単純なプラグインを作成して、スクリプトを保存するためのlibとproceduresディレクトリのみを含めることができます。COSMOSが定義されたcmd/tlmを持たないプラグインを検出すると、テレメトリ処理用のマイクロサービスを起動しません。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプトをプラグインに整理する>スクリプトをプラグインに整理する<a href=#スクリプトをプラグインに整理する class=hash-link aria-label="スクリプトをプラグインに整理する への直接リンク" title="スクリプトをプラグインに整理する への直接リンク">​</a></h3>
<p>スクリプトが多くのメソッドを持つ大きなものになるにつれて、それらをプラグイン内の複数のファイルに分割することが理にかなっています。以下はプラグインのスクリプト/プロシージャの推奨される構成です。</p>
<table><thead><tr><th>フォルダ<th>説明<tbody><tr><td>targets/TARGET_NAME/lib<td>再利用可能なターゲット固有のメソッドを含むスクリプトファイルをここに配置<tr><td>targets/TARGET_NAME/procedures<td>1つの特定のターゲットを中心とした単純なプロシージャをここに配置</table>
<p>メインプロシージャでは、通常、load_utilityを使用してインストルメンテーションで他のファイルを取り込みます。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Ruby:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">load_utility</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'TARGET/lib/my_other_script.rb'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># Python:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">load_utility</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'TARGET/procedures/my_other_script.py'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプトをメソッドに整理する>スクリプトをメソッドに整理する<a href=#スクリプトをメソッドに整理する class=hash-link aria-label="スクリプトをメソッドに整理する への直接リンク" title="スクリプトをメソッドに整理する への直接リンク">​</a></h3>
<p>各アクティビティを異なるメソッドに入れてください。スクリプトをメソッドに入れると、整理が簡単になり、全体的なスクリプトが何をするかについての優れた高レベルの概要が得られます（メソッドに適切な名前を付ける場合）。曖昧で短いメソッド名にはボーナスポイントはありません。メソッド名は長く明確にしてください。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">test_1_heater_zone_control</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Verifies requirements 304, 306, and 310"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># テストコードをここに</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">script_1_heater_zone_control</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Verifies requirements 304, 306, and 310"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># テストコードをここに</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test_1_heater_zone_control</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"Verifies requirements 304, 306, and 310"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># テストコードをここに</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">script_1_heater_zone_control</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"Verifies requirements 304, 306, and 310"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># テストコードをここに</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=クラス-vs-非スコープメソッドの使用>クラス vs 非スコープメソッドの使用<a href=#クラス-vs-非スコープメソッドの使用 class=hash-link aria-label="クラス vs 非スコープメソッドの使用 への直接リンク" title="クラス vs 非スコープメソッドの使用 への直接リンク">​</a></h3>
<p>オブジェクト指向プログラミングのクラスを使用すると、関連するメソッドのセットと関連する状態を整理できます。最も重要な側面は、メソッドが何らかの共有状態で動作することです。例えば、ジンバルを動かすコードがあり、メソッド間で移動または手順の数を追跡する必要がある場合、これはクラスを使用するのに最適な場所です。スクリプト内で複数回発生する処理をコピー＆ペーストせずに実行するためのヘルパーメソッドが必要な場合は、おそらくクラスに入れる必要はありません。</p>
<p>注：COSMOSの規則では、TARGET名に基づいて名付けられたTARGET/lib/target.[rb/py]ファイルがあり、Targetと呼ばれるクラスが含まれています。この議論はTARGET/proceduresディレクトリのスクリプトを指しています。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Gimbal</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  attr_accessor </span><span class="token symbol">:gimbal_steps</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">initialize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token variable" style="color:rgb(214, 222, 235)">@gimbal_steps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">steps_to_move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ジンバルを動かす</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token variable" style="color:rgb(214, 222, 235)">@gimbal_steps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> steps_to_move</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">home_gimbal</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ジンバルをホームポジションに</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token variable" style="color:rgb(214, 222, 235)">@gimbal_steps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">perform_common_math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  x </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> y</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">home_gimbal</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Moved gimbal </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">gimbal</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token string-literal interpolation content">gimbal_steps</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> perform_common_math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gimbal_steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"Math:</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">result</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__init__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gimbal_steps </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> steps_to_move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ジンバルを動かす</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gimbal_steps </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> steps_to_move</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">home_gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ジンバルをホームポジションに</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gimbal_steps </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">perform_common_math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> y</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> Gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">home_gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">move</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"Moved gimbal </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">gimbal</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token string-interpolation interpolation">gimbal_steps</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> perform_common_math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gimbal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gimbal_steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"Math:</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=インストルメント化された行と非インストルメント化された行requireとload>インストルメント化された行と非インストルメント化された行（requireとload）<a href=#インストルメント化された行と非インストルメント化された行requireとload class=hash-link aria-label="インストルメント化された行と非インストルメント化された行（requireとload） への直接リンク" title="インストルメント化された行と非インストルメント化された行（requireとload） への直接リンク">​</a></h3>
<p>COSMOSスクリプトは通常「インストルメント化」されています。これは、各行に主に現在実行中の行をハイライトし、wait_checkのような何かが失敗した場合に例外をキャッチするコードが裏側で追加されていることを意味します。スクリプトで他のファイルのコードを使用する必要がある場合、そのコードを取り込むためにいくつかの方法があります。一部の手法はインストルメント化されたコードを取り込み、他の手法は非インストルメント化されたコードを取り込みます。両方を使用する理由があります。</p>
<p>load_utility（および非推奨のrequire_utility）は、他のファイルからインストルメント化されたコードを取り込みます。COSMOSが他のファイルのコードを実行するとき、Script Runnerは他のファイルに移動し、実行時に各行をハイライト表示します。これは他のファイルを取り込むためのデフォルトの方法であるべきです。何かが失敗した場合に継続することができ、オペレーターによりよい可視性を提供するためです。</p>
<p>しかし、時には他のファイルからのコード実行を表示したくない場合もあります。外部で開発されたライブラリは一般的にインストルメント化されることを好まず、大きなループを含むコードや行のハイライト表示時に時間がかかるコードは、インストルメント化されていないメソッドに含めるとはるかに高速になります。Rubyは非インストルメント化されたコードを取り込むための2つの方法を提供しています。1つ目は「load」キーワードです。loadは別のファイルからコードを取り込み、ファイルが更新された場合は次のload呼び出し時にその変更を取り込みます。「require」はloadに似ていますが、別のファイルからコードを一度だけ取り込むように最適化されています。したがって、requireを使用してからrequireするファイルを変更する場合、ファイルを再度requireして変更を取り込むためにはScript Runnerを再起動する必要があります。一般的に、COSMOSスクリプティングではrequireよりもloadが推奨されます。loadの1つの注意点は、拡張子を含む完全なファイル名が必要なのに対し、requireキーワードはそれを必要としないことです。</p>
<p>Pythonでは、ライブラリはimport構文を使用して含まれます。importを使用してインポートされたコードはインストルメント化されません。load_utilityを使用してインポートされたコードのみがインストルメント化されます。</p>
<p>最後に、COSMOSスクリプティングには、インストルメント化されたスクリプトの途中でインストルメント化を無効にするための特別な構文があり、それはdisable_instrumentationメソッドです。これにより、インストルメント化された状態で実行すると遅すぎる大きなループやその他のアクティビティのインストルメント化を無効にすることができます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">disable_instrumentation </span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ここでは例外を投げる可能性のあるものが何もないことを確認してください！</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">5000000.</span><span class="token plain">times </span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    temp </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">puts temp</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">with</span><span class="token plain"> disable_instrumentation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># ここでは例外を投げる可能性のあるものが何もないことを確認してください！</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> x </span><span class="token keyword" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">range</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">5000000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        temp </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">temp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>非インストルメント化されたコードを実行する際</div><div class=admonitionContent_BuS1><p>コードが例外を発生させたり、チェックが失敗したりしないことを確認してください。非インストルメント化されたコードから例外が発生した場合、スクリプト全体が停止します。</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=デバッグと監査>デバッグと監査<a href=#デバッグと監査 class=hash-link aria-label="デバッグと監査 への直接リンク" title="デバッグと監査 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=組み込みデバッグ機能>組み込みデバッグ機能<a href=#組み込みデバッグ機能 class=hash-link aria-label="組み込みデバッグ機能 への直接リンク" title="組み込みデバッグ機能 への直接リンク">​</a></h3>
<p>Script Runnerには、スクリプトが特定の動作をしている理由を判断するのに役立つ組み込みのデバッグ機能があります。特に重要なのは、スクリプト変数を検査して設定する能力です。</p>
<p>デバッグ機能を使用するには、まずスクリプトメニューから「Toggle Debug」オプションを選択します。これにより、ツールの下部に小さなDebug:プロンプトが追加されます。このプロンプトに入力されたコードは、Enterが押されると実行されます。実行中のスクリプトの変数を検査するには、スクリプトを一時停止してから、変数名を入力して変数の値をデバッグプロンプトに表示します。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">variable_name</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>変数は単に等号を使用して設定することもできます。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">variable_name </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>必要に応じて、デバッグプロンプトから通常のコマンディングメソッドを使用してコマンドを挿入することもできます。これらのコマンドはScript Runnerメッセージログに記録されます。これは、CmdSender（コマンドはCmdTlmServerメッセージログにのみ記録される）のような別のCOSMOSツールを使用するよりも有利かもしれません。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST COLLECT with TYPE NORMAL"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>デバッグプロンプトはコマンド履歴を保持し、上下の矢印を使用して履歴をスクロールできることに注意してください。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ブレークポイント>ブレークポイント<a href=#ブレークポイント class=hash-link aria-label="ブレークポイント への直接リンク" title="ブレークポイント への直接リンク">​</a></h3>
<p>Script Runnerで行番号（左側のガター）をクリックしてブレークポイントを追加できます。スクリプトはブレークポイントに到達すると自動的に一時停止します。ブレークポイントで停止したら、Debug行を使用して変数を評価できます。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=切断モードの使用>切断モードの使用<a href=#切断モードの使用 class=hash-link aria-label="切断モードの使用 への直接リンク" title="切断モードの使用 への直接リンク">​</a></h3>
<p>切断モードは、実際のハードウェアがループに入っていない環境でスクリプトをテストできるScript Runnerの機能です。切断モードはスクリプト -> Toggle Disconnectを選択して開始します。選択すると、ユーザーは切断するターゲットを選択するよう求められます。デフォルトでは、すべてのターゲットが切断され、実際のハードウェアなしでスクリプトをテストできます。オプションで、ターゲットのサブセットのみを選択することができ、これは部分的に統合された環境でスクリプトを試すのに役立ちます。</p>
<p>切断モードでは、切断されたターゲットへのコマンドは常に成功します。さらに、切断されたターゲットのテレメトリのすべてのチェックはすぐに成功します。これにより、ハードウェアの動作や適切な機能を心配することなく、論理エラーやその他のスクリプト固有のエラーについてプロシージャを素早く実行できます。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=スクリプトの監査>スクリプトの監査<a href=#スクリプトの監査 class=hash-link aria-label="スクリプトの監査 への直接リンク" title="スクリプトの監査 への直接リンク">​</a></h3>
<p>Script Runnerには、実行前後にスクリプトを監査するためのいくつかのツールが含まれています。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=ruby構文チェック>Ruby構文チェック<a href=#ruby構文チェック class=hash-link aria-label="Ruby構文チェック への直接リンク" title="Ruby構文チェック への直接リンク">​</a></h4>
<p>Ruby構文チェックツールはスクリプトメニューにあります。このツールは-cフラグを付けたruby実行可能ファイルを使用して、スクリプトの構文チェックを実行します。構文エラーが見つかった場合、Rubyインタープリタが提示する正確なメッセージがユーザーに表示されます。これらは暗号のように見えることがありますが、最も一般的な問題は、引用符で囲まれた文字列を閉じていない、「end」キーワードを忘れている、またはブロックを使用しているが前の「do」キーワードを忘れているなどです。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=一般的なシナリオ>一般的なシナリオ<a href=#一般的なシナリオ class=hash-link aria-label="一般的なシナリオ への直接リンク" title="一般的なシナリオ への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ユーザー入力のベストプラクティス>ユーザー入力のベストプラクティス<a href=#ユーザー入力のベストプラクティス class=hash-link aria-label="ユーザー入力のベストプラクティス への直接リンク" title="ユーザー入力のベストプラクティス への直接リンク">​</a></h3>
<p>COSMOSはスクリプトで手動ユーザー入力を収集するためのいくつかの異なるメソッドを提供しています。任意の値を許可するユーザー入力メソッド（ask()やask_string()など）を使用する場合は、先に進む前にスクリプトで与えられた値を検証することが非常に重要です。テキスト入力を求める場合は、大文字小文字の可能性に対処し、無効な入力でユーザーに再度プロンプトを表示するか安全なパスを取ることを確実にすることが特に重要です。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">answer </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask_string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"続行しますか (y/n)?"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> answer </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'y'</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">and</span><span class="token plain"> answer </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'Y'</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">raise</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"ユーザーが入力: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">answer</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">while</span><span class="token plain"> temp </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10.0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">or</span><span class="token plain"> temp </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">50.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"10.0から50.0の間の希望温度を入力してください"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">answer </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask_string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"続行しますか (y/n)?"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> answer </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">'y'</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">and</span><span class="token plain"> answer </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">'Y'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">raise</span><span class="token plain"> RuntimeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"ユーザーが入力: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">answer</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">while</span><span class="token plain"> temp </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10.0</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">or</span><span class="token plain"> temp </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">50.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"10.0から50.0の間の希望温度を入力してください"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>可能な場合は、常にユーザーに制約された選択肢のリストを持つ他のユーザー入力メソッド（message_box、vertical_message_box、combo_box）を使用してください。</p>
<p>これらのすべてのユーザー入力メソッドは、ユーザーに「キャンセル (Cancel)」オプションを提供することに注意してください。キャンセルがクリックされると、スクリプトは一時停止しますが、ユーザー入力行に留まります。「Go」を押して続行すると、ユーザーは値を入力するよう再度求められます。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=条件付きで手動ユーザー入力ステップを要求する>条件付きで手動ユーザー入力ステップを要求する<a href=#条件付きで手動ユーザー入力ステップを要求する class=hash-link aria-label="条件付きで手動ユーザー入力ステップを要求する への直接リンク" title="条件付きで手動ユーザー入力ステップを要求する への直接リンク">​</a></h3>
<p>可能な場合、ユーザー入力を求めることなく実行できるようにスクリプトを書くことは有用な設計パターンです。これにより、スクリプトがより簡単にテストでき、ユーザー入力の選択や値に対して文書化されたデフォルト値が提供されます。このパターンを実装するには、ask()、prompt()、無限wait()ステートメントなどのすべての手動ステップを、RubyではRuby $manual、Pythonでは RunningScript.manual の値をチェックするif文でラップする必要があります。変数が設定されている場合は手動ステップを実行し、そうでない場合はデフォルト値を使用します。</p>
<p>Ruby例:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(214, 222, 235)">$manual</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"温度を入力してください"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!</span><span class="token variable" style="color:rgb(214, 222, 235)">$manual</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"自動モードでは無限待機をスキップします"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python例:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> RunningScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">manual</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ask</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"温度を入力してください"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    temp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">not</span><span class="token plain"> RunningScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">manual</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"自動モードでは無限待機をスキップします"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>スイートを実行する場合、ツールの上部に「手動 (Manual)」というチェックボックスがあり、この$manual変数に直接影響します。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=レポートに追加情報を出力する>レポートに追加情報を出力する<a href=#レポートに追加情報を出力する class=hash-link aria-label="レポートに追加情報を出力する への直接リンク" title="レポートに追加情報を出力する への直接リンク">​</a></h3>
<p>COSMOSスクリプトランナーは、スクリプトスイートで動作する際に、各スクリプトのPASS/FAILED/SKIPPEDの状態を示すレポートを自動的に生成します。以下の例のように、このレポートに任意のテキストを挿入することもできます。あるいは、シンプルにprintを使用してScript Runnerメッセージログにテキストを出力することもできます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">MyGroup</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> OpenC3</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Group</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">script_1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 以下のテキストはレポートに配置されます</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    OpenC3</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Group</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"要件304、306、310を検証します"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># このputs行はsr_messagesログファイルに表示されます</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"script_1完了"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> openc3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">suite </span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> Group</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">MyGroup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Group</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">script_1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 以下のテキストはレポートに配置されます</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        Group</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"要件304、306、310を検証します"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># このputs行はsr_messagesログファイルに表示されます</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"script_1完了"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=複数のパケットからテレメトリポイントの最新値を取得する>複数のパケットからテレメトリポイントの最新値を取得する<a href=#複数のパケットからテレメトリポイントの最新値を取得する class=hash-link aria-label="複数のパケットからテレメトリポイントの最新値を取得する への直接リンク" title="複数のパケットからテレメトリポイントの最新値を取得する への直接リンク">​</a></h3>
<p>一部のシステムには、すべてのパケットに同じ名前の高レートデータポイントが含まれています。COSMOSは、LATESTという特別なパケット名を使用して、複数のパケットに含まれるテレメトリポイントの最新値を取得することをサポートしています。ターゲットINSTにPACKET1とPACKET2の2つのパケットがあるとします。両方のパケットにはTEMPというテレメトリポイントがあります。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 最も最近受信したPACKET1からTEMPの値を取得</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">value </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST PACKET1 TEMP"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 最も最近受信したPACKET2からTEMPの値を取得</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">value </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST PACKET2 TEMP"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 最も最近受信したPACKET1またはPACKET2からTEMPの値を取得</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">value </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST LATEST TEMP"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=テレメトリポイントのすべてのサンプルをチェックする>テレメトリポイントのすべてのサンプルをチェックする<a href=#テレメトリポイントのすべてのサンプルをチェックする class=hash-link aria-label="テレメトリポイントのすべてのサンプルをチェックする への直接リンク" title="テレメトリポイントのすべてのサンプルをチェックする への直接リンク">​</a></h3>
<p>COSMOSスクリプトを書く際、テレメトリポイントの最新の値をチェックすることで通常は仕事が完了します。tlm()、tlm_raw()などのメソッドはすべて、テレメトリポイントの最新の値を取得します。テレメトリポイントのすべてのサンプルに対して分析を実行する必要がある場合もあります。これはCOSMOSパケットサブスクリプションシステムを使用して行うことができます。パケットサブスクリプションシステムでは、1つまたは複数のパケットを選択し、それらをすべてキューから受信することができます。その後、各パケットから関心のある特定のテレメトリポイントを選び出すことができます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">id </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> subscribe_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'HEALTH_STATUS'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'ADCS'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait </span><span class="token number" style="color:rgb(247, 140, 108)">1.5</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> get_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain">packet</span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">packet</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(173, 219, 103)">'PACKET_TIMESECONDS'</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">packet</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(173, 219, 103)">'target_name'</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">packet</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(173, 219, 103)">'packet_name'</span><span class="token string-literal interpolation content punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># しばらく待ってから、最後に返されたIDを再利用</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> get_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token builtin" style="color:rgb(130, 170, 255)">id</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> subscribe_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">'HEALTH_STATUS'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">'INST'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">'ADCS'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token builtin" style="color:rgb(130, 170, 255)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> get_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> packet </span><span class="token keyword" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">packet</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(173, 219, 103)">'PACKET_TIMESECONDS'</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">packet</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(173, 219, 103)">'target_name'</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">packet</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(173, 219, 103)">'packet_name'</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># しばらく待ってから、最後に返されたIDを再利用</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token builtin" style="color:rgb(130, 170, 255)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> packets </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> get_packets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=ニーモニックで変数を使用する>ニーモニックで変数を使用する<a href=#ニーモニックで変数を使用する class=hash-link aria-label="ニーモニックで変数を使用する への直接リンク" title="ニーモニックで変数を使用する への直接リンク">​</a></h3>
<p>コマンドとテレメトリのニーモニックはCOSMOSスクリプトの単なる文字列なので、一部のコンテキストでは変数を利用して再利用可能なコードを作成できます。例えば、メソッドはターゲット名を入力として受け取り、ターゲットの複数のインスタンスをサポートできます。番号付きテレメトリポイントのセットの値を渡すこともできます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> temp_number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target_name</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> COLLECT with TYPE NORMAL"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">target_name</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> TEMP</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">temp_number</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)"> > 50.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> temp_number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    cmd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> COLLECT with TYPE NORMAL"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    wait_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">target_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> TEMP</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">temp_number</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(173, 219, 103)"> > 50.0"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>これは、番号付けされたテレメトリポイントのセットをループ処理する場合にも役立ちますが、<a href=#%E3%83%AB%E3%83%BC%E3%83%97-vs-%E3%82%A2%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%9F%E3%83%AB%E3%83%BC%E3%83%97>ループ vs アンロールされたループ</a>セクションで説明したループのデメリットに注意してください。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=カスタムwait_check_expressionの使用>カスタムwait_check_expressionの使用<a href=#カスタムwait_check_expressionの使用 class=hash-link aria-label="カスタムwait_check_expressionの使用 への直接リンク" title="カスタムwait_check_expressionの使用 への直接リンク">​</a></h3>
<p>COSMOSのwait_check_expression（およびcheck_expression）を使用すると、より複雑なチェックを実行し、それでも何かがうまくいかなかった場合にCHECKエラーメッセージでスクリプトを停止させることができます。例えば、変数同士をチェックしたり、テレメトリポイントを範囲に対してチェックしたりできます。wait_check_expressionに渡される正確なテキスト文字列は、パスするか、タイムアウトが発生するまで繰り返し評価されます。実際の式内で文字列補間を使用しないことが重要です。そうしないと、文字列補間構文内の値は文字列に変換されるときに1回だけ評価されます。</p>
<p>Ruby:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">one </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">two </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check_expression</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"one == two"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># エラー: CHECK: one == two は 1.017035 秒待機後にFALSEです</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 整数範囲のチェック</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check_expression</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"one > 0 and one &lt; 10 # 初期値 one = </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">#{</span><span class="token string-literal interpolation content">one</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Python:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">one </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">two </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check_expression</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"one == two"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.25</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">locals</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># エラー: CHECK: one == two は 1.017035 秒待機後にFALSEです</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># 整数範囲のチェック</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">wait_check_expression</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">"one > 0 and one &lt; 10"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.25</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">locals</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=通常のrubyスクリプティングとcosmosスクリプティングの違い>通常のRubyスクリプティングとCOSMOSスクリプティングの違い<a href=#通常のrubyスクリプティングとcosmosスクリプティングの違い class=hash-link aria-label="通常のRubyスクリプティングとCOSMOSスクリプティングの違い への直接リンク" title="通常のRubyスクリプティングとCOSMOSスクリプティングの違い への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=単一行のif文を使用しないでください>単一行のif文を使用しないでください<a href=#単一行のif文を使用しないでください class=hash-link aria-label="単一行のif文を使用しないでください への直接リンク" title="単一行のif文を使用しないでください への直接リンク">​</a></h4>
<p>COSMOSスクリプティングは、何かがうまくいかなかった場合に例外をキャッチするために各行をインストルメント化します。単一行のif文では、例外処理がステートメントのどの部分が失敗したかを知ることができず、適切に継続できません。単一行のif文で例外が発生すると、スクリプト全体が停止し、継続できなくなります。COSMOSスクリプトでは単一行のif文を使用しないでください（ただし、インターフェースやその他のRubyコードでは使用しても問題ありません。COSMOSスクリプトだけでは使用しないでください）。</p>
<p>次のようにしないでください：</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token plain">run_method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS TEMP1"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10.0</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>代わりに次のようにしてください：</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># if文の中で失敗する可能性のあるコードを実行しないのがベストです</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"># tlm()は、CmdTlmServerが実行されていなかったり、ニーモニックのスペルが間違っていたりすると失敗する可能性があります</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">temp1 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> tlm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">"INST HEALTH_STATUS TEMP1"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> temp1 </span><span class="token operator" style="color:rgb(127, 219, 202)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  run_method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=問題が発生した場合>問題が発生した場合<a href=#問題が発生した場合 class=hash-link aria-label="問題が発生した場合 への直接リンク" title="問題が発生した場合 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=チェックが失敗する一般的な理由>チェックが失敗する一般的な理由<a href=#チェックが失敗する一般的な理由 class=hash-link aria-label="チェックが失敗する一般的な理由 への直接リンク" title="チェックが失敗する一般的な理由 への直接リンク">​</a></h3>
<p>COSMOSスクリプトでチェックが失敗する一般的な理由は3つあります：</p>
<ol>
<li>
<p>遅延が短すぎた</p>
<p>wait_check()メソッドは、参照されるテレメトリポイントがチェックに合格するまで待機する時間を示すタイムアウトを取ります。タイムアウトは、テスト対象のシステムがアクションを完了し、更新されたテレメトリを受信するのに十分な長さである必要があります。チェックが正常に完了するとすぐにスクリプトが続行されることに注意してください。したがって、より長いタイムアウトの唯一のペナルティは、失敗条件での追加の待機時間です。</p>
</li>
<li>
<p>チェックされた範囲または値が不正確または厳しすぎた</p>
<p>実際のテレメトリ値は問題ないが、チェックされた期待値が厳しすぎることがよくあります。意味のある場合はチェックの範囲を緩めてください。浮動小数点数をチェックする場合は、スクリプトがwait_check_tolerance()ルーチンを使用していることを確認し、適切な許容値を使用していることを確認してください。</p>
</li>
<li>
<p>チェックが本当に失敗した</p>
<p>もちろん、実際の失敗が発生することもあります。次のセクションでは、それらを処理して回復する方法を説明します。</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=異常からの回復方法>異常からの回復方法<a href=#異常からの回復方法 class=hash-link aria-label="異常からの回復方法 への直接リンク" title="異常からの回復方法 への直接リンク">​</a></h3>
<p>何かが失敗し、スクリプトがピンク色でハイライトされた行で停止した後、どのように回復できますか？幸いなことに、COSMOSはスクリプトで何かが失敗した後に回復するために使用できるいくつかのメカニズムを提供しています。</p>
<ol>
<li>
<p>再試行</p>
<p>失敗後、Script Runnerの「一時停止 (Pause)」ボタンは「再試行 (Retry)」に変わります。「再試行 (Retry)」ボタンをクリックすると、失敗した行が再実行されます。タイミングの問題による失敗の場合、これにより問題が解決され、スクリプトを続行できることがよくあります。失敗に注意し、次回の実行前にスクリプトを更新するようにしてください。</p>
</li>
<li>
<p>デバッグプロンプトの使用</p>
<p>Script -> Toggle Debugを選択することで、実行中のスクリプトを停止せずに状況を修正するために必要な任意のアクションを実行できます。また、なぜ何かが失敗したかを判断するために変数を検査することもできます。</p>
</li>
<li>
<p>選択実行</p>
<p>スクリプトの一部のみを実行する必要がある場合は、「選択実行 (Execute Selection)」を使用してスクリプトの一部のみを実行できます。これはスクリプトが一時停止しているか、エラーで停止している場合にも使用できます。</p>
</li>
<li>
<p>ここから実行</p>
<p>スクリプトをクリックし、右クリックして「ここから実行 (Run from here)」を選択することで、ユーザーは任意の点からスクリプトを再開できます。これは、スクリプトの前半に必要な変数定義が存在しない場合に適しています。</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=高度なトピック>高度なトピック<a href=#高度なトピック class=hash-link aria-label="高度なトピック への直接リンク" title="高度なトピック への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=csvまたはexcelを使用した高度なスクリプト設定>CSVまたはExcelを使用した高度なスクリプト設定<a href=#csvまたはexcelを使用した高度なスクリプト設定 class=hash-link aria-label="CSVまたはExcelを使用した高度なスクリプト設定 への直接リンク" title="CSVまたはExcelを使用した高度なスクリプト設定 への直接リンク">​</a></h3>
<p>スプレッドシートを使用してスクリプトで使用する値を保存することは、CM制御されたスクリプトがあるがテストのために一部の値を調整する必要がある場合や、異なるシリアル番号に対して異なる値を使用する必要がある場合に優れたオプションとなります。</p>
<p>Ruby CSVクラスを使用すると、CSVファイルからデータを簡単に読み取ることができます（クロスプラットフォームプロジェクトに推奨）。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'csv'</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">values </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">CSV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'test.csv'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">puts values</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Windowsのみを使用している場合、COSMOSにはExcelファイルを読み取るためのライブラリも含まれています。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'openc3/win32/excel'</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">ss </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">ExcelSpreadsheet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-literal string" style="color:rgb(173, 219, 103)">'C:/git/cosmos/test.xlsx'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">puts ss</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=rubyモジュールの使用タイミング>Rubyモジュールの使用タイミング<a href=#rubyモジュールの使用タイミング class=hash-link aria-label="Rubyモジュールの使用タイミング への直接リンク" title="Rubyモジュールの使用タイミング への直接リンク">​</a></h3>
<p>Rubyのモジュールには2つの目的があります：名前空間とミックスイン。名前空間は、同じ名前で意味の異なるクラスやメソッドを持つことを可能にします。例えば、名前空間を使用すれば、COSMOSはPacketクラスを持ち、別のRubyライブラリもPacketクラスを持つことができます。ただし、これはCOSMOSスクリプティングには通常役立ちません。</p>
<p>ミックスインは継承を使用せずにクラスに共通のメソッドを追加することを可能にします。ミックスインは、一部のクラスに共通の機能を追加し、他のクラスには追加しない場合や、クラスを複数のファイルに分割する場合に役立ちます。</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#d6deeb;--prism-background-color:#011627><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style=color:#d6deeb;background-color:#011627><code class=codeBlockLines_e6Vv><span class=token-line style=color:#d6deeb><span class="token keyword" style="color:rgb(127, 219, 202)">module</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">MyModule</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">module_method</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">MyTest</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> OpenC3</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Group</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">include</span><span class="token plain"> MyModule</span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(130, 170, 255)">test_1</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">    module_method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><span class="token plain"></span><br></span><span class=token-line style=color:#d6deeb><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">end</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/guides/script-writing.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=ドキュメントページ><a class="pagination-nav__link pagination-nav__link--prev" href=/ja/docs/guides/raspberrypi><div class=pagination-nav__sublabel>前へ</div><div class=pagination-nav__label>Raspberry Pi</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/ja/docs/guides/scripting-api><div class=pagination-nav__sublabel>次へ</div><div class=pagination-nav__label>スクリプティング API ガイド</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#はじめに class="table-of-contents__link toc-highlight">はじめに</a><li><a href=#概念 class="table-of-contents__link toc-highlight">概念</a><ul><li><a href=#cosmosでのruby対python class="table-of-contents__link toc-highlight">COSMOSでのRuby対Python</a></ul><li><a href=#スクリプティングの哲学 class="table-of-contents__link toc-highlight">スクリプティングの哲学</a><ul><li><a href=#基本的なスクリプト例 class="table-of-contents__link toc-highlight">基本的なスクリプト例</a><li><a href=#kisskeep-it-simple-stupid class="table-of-contents__link toc-highlight">KISS（Keep It Simple Stupid）</a><li><a href=#drydont-repeat-yourself class="table-of-contents__link toc-highlight">DRY（Don't Repeat Yourself）</a><li><a href=#コメントを適切に使用する class="table-of-contents__link toc-highlight">コメントを適切に使用する</a><li><a href=#スクリプトランナー class="table-of-contents__link toc-highlight">スクリプトランナー</a><li><a href=#ループ-vs-アンロールされたループ class="table-of-contents__link toc-highlight">ループ vs アンロールされたループ</a></ul><li><a href=#スクリプトの構成 class="table-of-contents__link toc-highlight">スクリプトの構成</a><ul><li><a href=#スクリプトをプラグインに整理する class="table-of-contents__link toc-highlight">スクリプトをプラグインに整理する</a><li><a href=#スクリプトをメソッドに整理する class="table-of-contents__link toc-highlight">スクリプトをメソッドに整理する</a><li><a href=#クラス-vs-非スコープメソッドの使用 class="table-of-contents__link toc-highlight">クラス vs 非スコープメソッドの使用</a><li><a href=#インストルメント化された行と非インストルメント化された行requireとload class="table-of-contents__link toc-highlight">インストルメント化された行と非インストルメント化された行（requireとload）</a></ul><li><a href=#デバッグと監査 class="table-of-contents__link toc-highlight">デバッグと監査</a><ul><li><a href=#組み込みデバッグ機能 class="table-of-contents__link toc-highlight">組み込みデバッグ機能</a><li><a href=#ブレークポイント class="table-of-contents__link toc-highlight">ブレークポイント</a><li><a href=#切断モードの使用 class="table-of-contents__link toc-highlight">切断モードの使用</a><li><a href=#スクリプトの監査 class="table-of-contents__link toc-highlight">スクリプトの監査</a><ul><li><a href=#ruby構文チェック class="table-of-contents__link toc-highlight">Ruby構文チェック</a></ul></ul><li><a href=#一般的なシナリオ class="table-of-contents__link toc-highlight">一般的なシナリオ</a><ul><li><a href=#ユーザー入力のベストプラクティス class="table-of-contents__link toc-highlight">ユーザー入力のベストプラクティス</a><li><a href=#条件付きで手動ユーザー入力ステップを要求する class="table-of-contents__link toc-highlight">条件付きで手動ユーザー入力ステップを要求する</a><li><a href=#レポートに追加情報を出力する class="table-of-contents__link toc-highlight">レポートに追加情報を出力する</a><li><a href=#複数のパケットからテレメトリポイントの最新値を取得する class="table-of-contents__link toc-highlight">複数のパケットからテレメトリポイントの最新値を取得する</a><li><a href=#テレメトリポイントのすべてのサンプルをチェックする class="table-of-contents__link toc-highlight">テレメトリポイントのすべてのサンプルをチェックする</a><li><a href=#ニーモニックで変数を使用する class="table-of-contents__link toc-highlight">ニーモニックで変数を使用する</a><li><a href=#カスタムwait_check_expressionの使用 class="table-of-contents__link toc-highlight">カスタムwait_check_expressionの使用</a><li><a href=#通常のrubyスクリプティングとcosmosスクリプティングの違い class="table-of-contents__link toc-highlight">通常のRubyスクリプティングとCOSMOSスクリプティングの違い</a><ul><li><a href=#単一行のif文を使用しないでください class="table-of-contents__link toc-highlight">単一行のif文を使用しないでください</a></ul></ul><li><a href=#問題が発生した場合 class="table-of-contents__link toc-highlight">問題が発生した場合</a><ul><li><a href=#チェックが失敗する一般的な理由 class="table-of-contents__link toc-highlight">チェックが失敗する一般的な理由</a><li><a href=#異常からの回復方法 class="table-of-contents__link toc-highlight">異常からの回復方法</a></ul><li><a href=#高度なトピック class="table-of-contents__link toc-highlight">高度なトピック</a><ul><li><a href=#csvまたはexcelを使用した高度なスクリプト設定 class="table-of-contents__link toc-highlight">CSVまたはExcelを使用した高度なスクリプト設定</a><li><a href=#rubyモジュールの使用タイミング class="table-of-contents__link toc-highlight">Rubyモジュールの使用タイミング</a></ul></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>ホームページ</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://openc3.com target=_blank rel="noopener noreferrer" class=footer__link-item>ホーム</a></ul></div><div class="col footer__col"><div class=footer__title>ドキュメント</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/ja/docs>ドキュメント</a></ul></div><div class="col footer__col"><div class=footer__title>コミュニティ</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.linkedin.com/company/openc3 target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>その他</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/OpenC3/cosmos target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a class=footer__link-item href=/ja/docs/privacy>プライバシーポリシー</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 OpenC3, Inc.</div></div></div></footer></div>