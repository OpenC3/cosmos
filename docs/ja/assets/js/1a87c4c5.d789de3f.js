"use strict";(self.webpackChunkdocs_openc3_com=self.webpackChunkdocs_openc3_com||[]).push([["9395"],{1159:function(e,n,t){t.r(n),t.d(n,{default:()=>p,frontMatter:()=>i,metadata:()=>s,assets:()=>a,toc:()=>l,contentTitle:()=>c});var s=JSON.parse('{"id":"guides/monitoring","title":"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","description":"COSMOS\u306E\u5185\u90E8\u3092\u76E3\u8996\u3059\u308B\u69D8\u3005\u306A\u65B9\u6CD5","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/guides/monitoring.md","sourceDirName":"guides","slug":"/guides/monitoring","permalink":"/ja/docs/guides/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/guides/monitoring.md","tags":[],"version":"current","frontMatter":{"title":"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","description":"COSMOS\u306E\u5185\u90E8\u3092\u76E3\u8996\u3059\u308B\u69D8\u3005\u306A\u65B9\u6CD5","sidebar_custom_props":{"myEmoji":"\uD83D\uDDA5\uFE0F"}},"sidebar":"defaultSidebar","previous":{"title":"\u30ED\u30AE\u30F3\u30B0","permalink":"/ja/docs/guides/logging"},"next":{"title":"\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9","permalink":"/ja/docs/guides/performance"}}'),r=t("5893"),o=t("65");let i={title:"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0",description:"COSMOS\u306E\u5185\u90E8\u3092\u76E3\u8996\u3059\u308B\u69D8\u3005\u306A\u65B9\u6CD5",sidebar_custom_props:{myEmoji:"\uD83D\uDDA5\uFE0F"}},c=void 0,a={},l=[{value:"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3068\u53EF\u89B3\u6E2C\u6027",id:"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3068\u53EF\u89B3\u6E2C\u6027",level:3},{value:"Fluent/Fluentd",id:"fluentfluentd",level:3},{value:"OpenDistro",id:"opendistro",level:3},{value:"Prometheus",id:"prometheus",level:3},{value:"Grafana",id:"grafana",level:3}];function d(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3068\u53EF\u89B3\u6E2C\u6027",children:"\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3068\u53EF\u89B3\u6E2C\u6027"}),"\n",(0,r.jsx)(n.admonition,{title:"\u4F8B\u793A\u306E\u307F",type:"warning",children:(0,r.jsx)(n.p,{children:"Fluentd\u306B\u3088\u308B\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u306FOpenC3\u306B\u3088\u3063\u3066\u516C\u5F0F\u306B\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u304A\u3089\u305A\u3001\u3053\u3053\u306B\u8A18\u8F09\u3055\u308C\u3066\u3044\u308B\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306F\u305D\u306E\u5B9F\u884C\u65B9\u6CD5\u306E\u4F8B\u306B\u904E\u304E\u307E\u305B\u3093\u3002"})}),"\n",(0,r.jsxs)(n.p,{children:["COSMOS\u3092\u30B3\u30F3\u30C6\u30CA\u30D9\u30FC\u30B9\u306E\u30B5\u30FC\u30D3\u30B9\u306B\u79FB\u884C\u3059\u308B\u306B\u3042\u305F\u308A\u3001COSMOS\u306E\u5185\u90E8\u3092\u3088\u308A\u826F\u304F\u76E3\u8996\u3059\u308B\u65B9\u6CD5\u304C\u5FC5\u8981\u3067\u3057\u305F\u3002\u305D\u3053\u3067\u3001COSMOS\u3092\u76E3\u8996\u3059\u308B\u305F\u3081\u306B\u4F7F\u7528\u3067\u304D\u308B\u5916\u90E8\u30B5\u30FC\u30D3\u30B9\u306B\u95A2\u3059\u308B\u60C5\u5831\u3092\u3044\u304F\u3064\u304B\u7D39\u4ECB\u3057\u307E\u3059\u3002",(0,r.jsx)(n.a,{href:"https://sre.google/sre-book/monitoring-distributed-systems/",children:"\u5206\u6563\u30B7\u30B9\u30C6\u30E0\u306E\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0"}),"\u306B\u3064\u3044\u3066\u3055\u3089\u306B\u8A73\u3057\u304F\u77E5\u308A\u305F\u3044\u5834\u5408\u306F\u3053\u3061\u3089\u3092\u3054\u89A7\u304F\u3060\u3055\u3044\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"fluentfluentd",children:(0,r.jsx)(n.a,{href:"https://www.fluentd.org/guides/recipes/docker-logging",children:"Fluent/Fluentd"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Fluentd\u306F\u30AA\u30FC\u30D7\u30F3\u30BD\u30FC\u30B9\u306E\u30C7\u30FC\u30BF\u30B3\u30EC\u30AF\u30BF\u30FC\u3067\u3042\u308A\u3001\u30C7\u30FC\u30BF\u53CE\u96C6\u3068\u6D88\u8CBB\u3092\u7D71\u4E00\u3057\u3066\u3001\u30C7\u30FC\u30BF\u306E\u3088\u308A\u826F\u3044\u4F7F\u7528\u3068\u7406\u89E3\u3092\u53EF\u80FD\u306B\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"in_docker.conf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<source>\n  @type forward\n  port 24224\n  bind 0.0.0.0\n</source>\n<match *.metric>\n  @type copy\n  <store>\n    @type elasticsearch\n    host openc3-elasticsearch\n    port 9200\n    logstash_format true\n    logstash_prefix metric\n    logstash_dateformat %Y%m%d\n    include_tag_key true\n    type_name access_log\n    tag_key @log_name\n    flush_interval 1s\n  </store>\n  <store>\n    @type stdout\n  </store>\n</match>\n<match *__openc3.log>\n  @type copy\n  <store>\n    @type elasticsearch\n    host openc3-elasticsearch\n    port 9200\n    logstash_format true\n    logstash_prefix openc3\n    logstash_dateformat %Y%m%d\n    include_tag_key true\n    type_name access_log\n    tag_key @log_name\n    flush_interval 1s\n  </store>\n  <store>\n    @type stdout\n  </store>\n</match>\n<match *.**>\n  @type copy\n  <store>\n    @type elasticsearch\n    host openc3-elasticsearch\n    port 9200\n    logstash_format true\n    logstash_prefix fluentd\n    logstash_dateformat %Y%m%d\n    include_tag_key true\n    type_name access_log\n    tag_key @log_name\n    flush_interval 1s\n  </store>\n  <store>\n    @type stdout\n  </store>\n</match>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Dockerfile"}),"\n",(0,r.jsxs)(n.p,{children:["\u6CE8\u610F\uFF1AFROM\u884C\u3067\u30A2\u30FC\u30AD\u30C6\u30AF\u30C1\u30E3\u56FA\u6709\u306E\u30D3\u30EB\u30C9\u3092\u4F7F\u7528\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\u4F8B\u3001MacBook\u3067\u3042\u308B\u5834\u5408\uFF1A",(0,r.jsx)(n.code,{children:"FROM arm64v8/fluentd:v1.18-1"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FROM fluent/fluentd:v1.18-1\n\nCOPY ./in_docker.conf /fluentd/etc/fluent.conf\nUSER root\nRUN gem install fluent-plugin-elasticsearch --no-document --version 5.4.3 \\\n  && gem install fluent-plugin-prometheus --no-document --version 2.2.0\nUSER fluent\n"})}),"\n",(0,r.jsx)(n.h3,{id:"opendistro",children:(0,r.jsx)(n.a,{href:"https://opendistro.github.io/for-elasticsearch-docs/",children:"OpenDistro"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Open Distro for Elasticsearch\u306F\u3001\u5F37\u529B\u3067\u4F7F\u3044\u3084\u3059\u3044\u30A4\u30D9\u30F3\u30C8\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u304A\u3088\u3073\u30A2\u30E9\u30FC\u30C8\u30B7\u30B9\u30C6\u30E0\u3092\u63D0\u4F9B\u3057\u3001\u30C7\u30FC\u30BF\u3092\u76E3\u8996\u3057\u3066\u81EA\u52D5\u7684\u306B\u95A2\u4FC2\u8005\u306B\u901A\u77E5\u3092\u9001\u4FE1\u3067\u304D\u308B\u3088\u3046\u306B\u3057\u307E\u3059\u3002\u76F4\u611F\u7684\u306AKibana\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u5F37\u529B\u306AAPI\u306B\u3088\u308A\u3001\u30A2\u30E9\u30FC\u30C8\u306E\u8A2D\u5B9A\u3068\u7BA1\u7406\u304C\u5BB9\u6613\u3067\u3059\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://opendistro.github.io/for-elasticsearch-docs/docs/install/docker/",children:"Docker"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u3053\u308C\u3092\u30C6\u30B9\u30C8\u3057\u305F\u969B\u3001opendistro\u306B\u30ED\u30B0\u3092\u53D6\u308A\u8FBC\u3080\u65B9\u6CD5\u306B\u3088\u3063\u3066\u306F\u3001\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3092\u7121\u52B9\u306B\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u3053\u3068\u304C\u308F\u304B\u308A\u307E\u3057\u305F\u3002\u4EE5\u4E0B\u306FDockerfile\u306E\u4F8B\u3067\u3059\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Dockerfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FROM amazon/opendistro-for-elasticsearch:1.12.0\n\nRUN /usr/share/elasticsearch/bin/elasticsearch-plugin remove opendistro_security\n"})}),"\n",(0,r.jsx)(n.h3,{id:"prometheus",children:(0,r.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Prometheus\u306F\u3001\u8A08\u6E2C\u3055\u308C\u305F\u30B8\u30E7\u30D6\u304B\u3089\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u76F4\u63A5\u3001\u307E\u305F\u306F\u77ED\u547D\u306A\u30B8\u30E7\u30D6\u306E\u305F\u3081\u306E\u4E2D\u9593\u30D7\u30C3\u30B7\u30E5\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u4ECB\u3057\u3066\u53CE\u96C6\u3057\u307E\u3059\u3002\u53CE\u96C6\u3057\u305F\u3059\u3079\u3066\u306E\u30B5\u30F3\u30D7\u30EB\u3092\u30ED\u30FC\u30AB\u30EB\u306B\u4FDD\u5B58\u3057\u3001\u3053\u306E\u30C7\u30FC\u30BF\u306B\u5BFE\u3057\u3066\u30EB\u30FC\u30EB\u3092\u5B9F\u884C\u3057\u3066\u3001\u65E2\u5B58\u306E\u30C7\u30FC\u30BF\u304B\u3089\u65B0\u3057\u3044\u6642\u7CFB\u5217\u30C7\u30FC\u30BF\u3092\u96C6\u8A08\u3057\u3066\u8A18\u9332\u3057\u305F\u308A\u3001\u30A2\u30E9\u30FC\u30C8\u3092\u751F\u6210\u3057\u305F\u308A\u3057\u307E\u3059\u3002\u53CE\u96C6\u3055\u308C\u305F\u30C7\u30FC\u30BF\u306E\u8996\u899A\u5316\u306B\u306F\u3001Grafana\u3084\u305D\u306E\u4ED6\u306EAPI\u30B3\u30F3\u30B7\u30E5\u30FC\u30DE\u30FC\u3092\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"prometheus.yaml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'global:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nrule_files:\n  # - "first.rules"\n  # - "second.rules"\n\nscrape_configs:\n  - job_name: prometheus\n    static_configs:\n      - targets: ["localhost:9090"]\n\n  - job_name: openc3-internal-metrics\n    metrics_path: "/openc3-api/internal/metrics"\n    static_configs:\n      - targets: ["openc3-cmd-tlm-api:2901"]\n\n  - job_name: openc3-cmd-tlm-api\n    metrics_path: "/openc3-api/metrics"\n    static_configs:\n      - targets: ["openc3-cmd-tlm-api:2901"]\n\n  - job_name: openc3-script-runner-api\n    metrics_path: "/script-api/metrics"\n    static_configs:\n      - targets: ["openc3-script-runner-api:2902"]\n\n  - job_name: minio-job\n    metrics_path: /minio/v2/metrics/cluster\n    scheme: http\n    static_configs:\n    - targets: [\'openc3-minio:9000\']\n'})}),"\n",(0,r.jsx)(n.p,{children:"Dockerfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FROM prom/prometheus:v3.2.1\nADD prometheus.yaml /etc/prometheus/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"grafana",children:(0,r.jsx)(n.a,{href:"https://grafana.com/",children:"Grafana"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Grafana\u306F\u3001\u30DE\u30EB\u30C1\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30AA\u30FC\u30D7\u30F3\u30BD\u30FC\u30B9\u5206\u6790\u304A\u3088\u3073\u5BFE\u8A71\u578B\u53EF\u8996\u5316Web\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u3059\u3002\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u63A5\u7D9A\u3059\u308B\u3068\u3001Web\u7528\u306E\u30C1\u30E3\u30FC\u30C8\u3001\u30B0\u30E9\u30D5\u3001\u30A2\u30E9\u30FC\u30C8\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"datasource.yaml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"apiVersion: 1\n\ndatasources:\n  - name: Prometheus\n    type: prometheus\n    # \u30A2\u30AF\u30BB\u30B9\u30E2\u30FC\u30C9 - proxy (UI\u306E\u30B5\u30FC\u30D0\u30FC) \u307E\u305F\u306F direct (UI\u306E\u30D6\u30E9\u30A6\u30B6)\n    access: proxy\n    url: http://openc3-prometheus:9090\n"})}),"\n",(0,r.jsx)(n.p,{children:"Dockerfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FROM grafana/grafana\n\nCOPY datasource.yaml /etc/grafana/provisioning/datasources/\n"})})]})}function p(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},65:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return i}});var s=t(7294);let r={},o=s.createContext(r);function i(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);